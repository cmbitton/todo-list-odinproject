(()=>{"use strict";class t{content=document.querySelector("#content");mainContentContainer=document.querySelector(".main-content-container");todoscontainer=document.querySelector(".todos-container");constructor(){}loadTodos(t){let e=0;this.todoscontainer.innerHTML="";for(const n of t){const t=document.createElement("div");t.classList.add("todo-container"),t.setAttribute("data-todo-index",e),!0===n.complete&&t.classList.add("completed"),e++;const s=document.createElement("h2");s.classList.add("todo-title"),s.textContent=n.title;const c=document.createElement("p");c.classList.add("todo-description"),c.textContent=n.description;const d=document.createElement("p");d.classList.add("todo-date"),d.innerHTML=`<span class="due-date-label">Due Date: </span> ${n.dueDate.slice(5,7)}/${n.dueDate.slice(8,11)}/${n.dueDate.slice(0,4)}`;const i=document.createElement("p");i.classList.add("todo-time"),i.innerHTML='<span class="due-time-label">Time Due: </span>'+(0==+(o=n.time).slice(0,2)?`${+o.slice(0,2)+12}:${o.slice(3,5)} AM`:+o.slice(0,2)<12?o+" AM":12==+o.slice(0,2)?`${o.slice(0,2)}:${o.slice(3,5)} PM`:`${+o.slice(0,2)-12}:${o.slice(3,5)} PM`);const a=document.createElement("button");a.setAttribute("type","button"),a.classList.add("complete-button"),!0===n.complete&&a.classList.add("completed"),!1===n.complete?a.textContent="Not Completed":a.textContent="Completed",t.append(s,c,d,i,a),this.todoscontainer.append(t)}var o;this.addCompletionButtonEvent(t)}addCompletionButtonEvent(t){const e=document.querySelectorAll(".complete-button");for(const o of e)o.addEventListener("click",(e=>{o.classList.contains("completed")?(o.classList.remove("completed"),o.textContent="Not Completed",e.target.parentNode.classList.remove("completed"),t[e.target.parentNode.getAttribute("data-todo-index")].complete=!1):(o.classList.add("completed"),e.target.parentNode.classList.add("completed"),o.textContent="Completed",t[e.target.parentNode.getAttribute("data-todo-index")].complete=!0)}))}}class e{constructor(t,e,o,n,s){this.title=t,this.description=e,this.dueDate=o,this.time=n,this.complete=s,this.todosList=[]}}const o=new class{content=document.querySelector("#content");nav=document.querySelector(".navbar");menu=document.querySelector(".menu");constructor(){this.mainContent=new t}dimBackground(){this.nav.style.filter="brightness(50%)",this.menu.style.filter="brightness(50%)",this.mainContent.mainContentContainer.style.filter="brightness(50%)"}unDimBackground(){this.nav.removeAttribute("style"),this.menu.removeAttribute("style"),this.mainContent.mainContentContainer.removeAttribute("style")}},n=new class{content=document.querySelector("#content");modalContainer=document.querySelector(".new-todo-container");constructor(){}toggleModalVisibility(){this.modalContainer.classList.toggle("hidden")}openModal(t){t.stopPropagation(),this.toggleModalVisibility()}closeModal(t){let e=t.target,o=!0;if(!t.target.classList.contains("submit-todo-button"))for(;e&&"BODY"!==e.nodeName;){if(e.classList.contains("new-todo-container")){o=!1;break}e=e.parentNode}return o&&!this.modalContainer.classList.contains("hidden")&&this.modalContainer.classList.toggle("hidden"),o}loadModalContent(){const t=document.querySelector("#tododate"),e=function(){const t=new Date,e=t.getFullYear(),o=t.getDate();let n=t.getMonth()+1;return n.toString.length<2&&(n="0"+n),{year:e,month:n,day:o}}();t.setAttribute("min",`${e.year}-${e.month}-${e.day}`)}},s=[],c=document.querySelector(".new-todo-container"),d=document.querySelector(".add-todo-button"),i=document.querySelector(".submit-todo-button");d.addEventListener("click",(t=>{c.classList.contains("hidden")&&(n.openModal(t),o.dimBackground())})),window.addEventListener("click",(t=>{n.closeModal(t)&&o.unDimBackground()})),i.addEventListener("click",(t=>{t.preventDefault();const c=document.querySelector("#todoname").value,d=document.querySelector("#tododescription").value,i=document.querySelector("#tododate").value,a=document.querySelector("#todotime").value,l=new e(c,d,i,a,!1);s.push(l),console.log(s),o.mainContent.loadTodos(s),n.closeModal(t),o.dimBackground()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVd2QixHQUNyQlEsRUFBY0ksZUFBZSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9kby1saXN0LW9kaW5wcm9qZWN0Ly4vc3JjL2xvYWRob21lLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC1vZGlucHJvamVjdC8uL3NyYy90YXNrcy5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3Qtb2RpbnByb2plY3QvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0LW9kaW5wcm9qZWN0Ly4vc3JjL3RvZG9tb2RhbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBMYW5kaW5nUGFnZSB7XG4gICAgY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjb250ZW50Jyk7XG4gICAgbmF2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5hdmJhcicpO1xuICAgIG1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWVudScpO1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLm1haW5Db250ZW50ID0gbmV3IE1haW5Db250ZW50O1xuICAgIH1cblxuICAgIGRpbUJhY2tncm91bmQoKSB7XG4gICAgICAgIHRoaXMubmF2LnN0eWxlLmZpbHRlciA9ICdicmlnaHRuZXNzKDUwJSknO1xuICAgICAgICB0aGlzLm1lbnUuc3R5bGUuZmlsdGVyID0gJ2JyaWdodG5lc3MoNTAlKSc7XG4gICAgICAgIHRoaXMubWFpbkNvbnRlbnQubWFpbkNvbnRlbnRDb250YWluZXIuc3R5bGUuZmlsdGVyID0gJ2JyaWdodG5lc3MoNTAlKSc7XG4gICAgfVxuXG4gICAgdW5EaW1CYWNrZ3JvdW5kKCkge1xuICAgICAgICB0aGlzLm5hdi5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgIHRoaXMubWVudS5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgIHRoaXMubWFpbkNvbnRlbnQubWFpbkNvbnRlbnRDb250YWluZXIucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgIH1cblxufVxuXG5cbmNsYXNzIE1haW5Db250ZW50IHtcbiAgICBjb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NvbnRlbnQnKTtcbiAgICBtYWluQ29udGVudENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluLWNvbnRlbnQtY29udGFpbmVyJyk7XG4gICAgdG9kb3Njb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9kb3MtY29udGFpbmVyJyk7XG4gICAgY29uc3RydWN0b3IoKSB7XG5cbiAgICB9XG5cblxuICAgIGxvYWRUb2RvcyhhcnIpIHtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICB0aGlzLnRvZG9zY29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuICAgICAgICBmb3IgKGNvbnN0IHRvZG8gb2YgYXJyKSB7XG4gICAgICAgICAgICBjb25zdCB0b2RvQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICB0b2RvQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3RvZG8tY29udGFpbmVyJyk7XG4gICAgICAgICAgICB0b2RvQ29udGFpbmVyLnNldEF0dHJpYnV0ZSgnZGF0YS10b2RvLWluZGV4JywgaSk7XG4gICAgICAgICAgICBpZih0b2RvLmNvbXBsZXRlID09PSB0cnVlKSB0b2RvQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2NvbXBsZXRlZCcpO1xuICAgICAgICAgICAgaSsrXG4gICAgICAgICAgICAvL3RpdGxlXG4gICAgICAgICAgICBjb25zdCB0b2RvVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMicpO1xuICAgICAgICAgICAgdG9kb1RpdGxlLmNsYXNzTGlzdC5hZGQoJ3RvZG8tdGl0bGUnKTtcbiAgICAgICAgICAgIHRvZG9UaXRsZS50ZXh0Q29udGVudCA9IHRvZG8udGl0bGU7XG5cbiAgICAgICAgICAgIC8vZGVzY3JpcHRpb25cbiAgICAgICAgICAgIGNvbnN0IHRvZG9EZXNjcmlwdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgICAgICAgIHRvZG9EZXNjcmlwdGlvbi5jbGFzc0xpc3QuYWRkKCd0b2RvLWRlc2NyaXB0aW9uJyk7XG4gICAgICAgICAgICB0b2RvRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSB0b2RvLmRlc2NyaXB0aW9uO1xuXG4gICAgICAgICAgICAvL2Rlc2NyaXB0aW9uXG4gICAgICAgICAgICBjb25zdCB0b2RvRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgICAgICAgIHRvZG9EYXRlLmNsYXNzTGlzdC5hZGQoJ3RvZG8tZGF0ZScpO1xuICAgICAgICAgICAgdG9kb0RhdGUuaW5uZXJIVE1MID0gYDxzcGFuIGNsYXNzPVwiZHVlLWRhdGUtbGFiZWxcIj5EdWUgRGF0ZTogPC9zcGFuPiAke3RvZG8uZHVlRGF0ZS5zbGljZSg1LCA3KX0vJHt0b2RvLmR1ZURhdGUuc2xpY2UoOCwgMTEpfS8ke3RvZG8uZHVlRGF0ZS5zbGljZSgwLCA0KX1gO1xuXG4gICAgICAgICAgICAvL2Rlc2NyaXB0aW9uXG4gICAgICAgICAgICBjb25zdCB0b2RvVGltZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgICAgICAgIHRvZG9UaW1lLmNsYXNzTGlzdC5hZGQoJ3RvZG8tdGltZScpO1xuICAgICAgICAgICAgdG9kb1RpbWUuaW5uZXJIVE1MID0gYDxzcGFuIGNsYXNzPVwiZHVlLXRpbWUtbGFiZWxcIj5UaW1lIER1ZTogPC9zcGFuPiR7Zm9ybWF0VGltZSh0b2RvLnRpbWUpfWA7XG5cbiAgICAgICAgICAgIC8vY29tcGxldGlvbiBidXR0b25cbiAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRlZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICAgICAgY29tcGxldGVkLnNldEF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKVxuICAgICAgICAgICAgY29tcGxldGVkLmNsYXNzTGlzdC5hZGQoJ2NvbXBsZXRlLWJ1dHRvbicpO1xuICAgICAgICAgICAgaWYodG9kby5jb21wbGV0ZSA9PT0gdHJ1ZSkgY29tcGxldGVkLmNsYXNzTGlzdC5hZGQoJ2NvbXBsZXRlZCcpO1xuICAgICAgICAgICAgKHRvZG8uY29tcGxldGUgPT09IGZhbHNlKSA/IGNvbXBsZXRlZC50ZXh0Q29udGVudCA9ICdOb3QgQ29tcGxldGVkJyA6IGNvbXBsZXRlZC50ZXh0Q29udGVudCA9ICdDb21wbGV0ZWQnO1xuXG5cbiAgICAgICAgICAgIHRvZG9Db250YWluZXIuYXBwZW5kKHRvZG9UaXRsZSwgdG9kb0Rlc2NyaXB0aW9uLCB0b2RvRGF0ZSwgdG9kb1RpbWUsIGNvbXBsZXRlZCk7XG4gICAgICAgICAgICB0aGlzLnRvZG9zY29udGFpbmVyLmFwcGVuZCh0b2RvQ29udGFpbmVyKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFkZENvbXBsZXRpb25CdXR0b25FdmVudChhcnIpO1xuICAgIH1cblxuICAgIGFkZENvbXBsZXRpb25CdXR0b25FdmVudChhcnIpIHtcbiAgICAgICAgY29uc3QgY29tcGxldGlvbkJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jb21wbGV0ZS1idXR0b24nKTtcbiAgICAgICAgZm9yIChjb25zdCBidXR0b24gb2YgY29tcGxldGlvbkJ1dHRvbikge1xuICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoYnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnY29tcGxldGVkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2NvbXBsZXRlZCcpO1xuICAgICAgICAgICAgICAgICAgICBidXR0b24udGV4dENvbnRlbnQgPSAnTm90IENvbXBsZXRlZCdcbiAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQucGFyZW50Tm9kZS5jbGFzc0xpc3QucmVtb3ZlKCdjb21wbGV0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgYXJyW2UudGFyZ2V0LnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlKCdkYXRhLXRvZG8taW5kZXgnKV0uY29tcGxldGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdjb21wbGV0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKCdjb21wbGV0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gJ0NvbXBsZXRlZCc7XG4gICAgICAgICAgICAgICAgICAgIGFycltlLnRhcmdldC5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZSgnZGF0YS10b2RvLWluZGV4JyldLmNvbXBsZXRlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gZm9ybWF0VGltZSh0aW1lKSB7XG4gICAgaWYgKCt0aW1lLnNsaWNlKDAsIDIpID09PSAwKSByZXR1cm4gKGAkeyt0aW1lLnNsaWNlKDAsIDIpICsgMTJ9OiR7dGltZS5zbGljZSgzLCA1KX0gQU1gKTtcbiAgICBlbHNlIGlmICgrdGltZS5zbGljZSgwLCAyKSA8IDEyKSByZXR1cm4gKHRpbWUgKz0gJyBBTScpO1xuICAgIGVsc2UgaWYgKCt0aW1lLnNsaWNlKDAsIDIpID09PSAxMikgcmV0dXJuIChgJHt0aW1lLnNsaWNlKDAsIDIpfToke3RpbWUuc2xpY2UoMywgNSl9IFBNYCk7XG4gICAgZWxzZSByZXR1cm4gKGAkeyt0aW1lLnNsaWNlKDAsIDIpIC0gMTJ9OiR7dGltZS5zbGljZSgzLCA1KX0gUE1gKTtcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBUb0RvIHtcbiAgICBjb25zdHJ1Y3RvciAodGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCB0aW1lLCBjb21wbGV0ZSkge1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5kdWVEYXRlID0gZHVlRGF0ZTtcbiAgICAgICAgdGhpcy50aW1lID0gdGltZTtcbiAgICAgICAgdGhpcy5jb21wbGV0ZSA9IGNvbXBsZXRlO1xuICAgICAgICB0aGlzLnRvZG9zTGlzdCA9ICBbXTtcbiAgICB9XG59IiwiaW1wb3J0IHsgZGVmYXVsdCBhcyBMYW5kaW5nUGFnZSB9IGZyb20gXCIuL2xvYWRob21lLmpzXCI7XG5pbXBvcnQgVG9EbyBmcm9tIFwiLi90YXNrcy5qc1wiO1xuaW1wb3J0IFRvRG9Nb2RhbCBmcm9tIFwiLi90b2RvbW9kYWwuanNcIjtcblxuY29uc3QgbGFuZGluZ0xvYWRlciA9IG5ldyBMYW5kaW5nUGFnZSgpO1xuY29uc3QgdG9kb21vZGFsID0gbmV3IFRvRG9Nb2RhbCgpO1xuY29uc3QgdG9kb3NMaXN0ID0gW107XG5jb25zdCBtb2RhbENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXctdG9kby1jb250YWluZXInKTtcbmNvbnN0IG5ld1RvZG9CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLXRvZG8tYnV0dG9uJyk7XG5jb25zdCBzdWJtaXRUb2RvQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnN1Ym1pdC10b2RvLWJ1dHRvbicpO1xuXG4vL29wZW5zIHRoZSBhZGQgbmV3IHRvZG8gbW9kYWxcbm5ld1RvZG9CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGlmIChtb2RhbENvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGRlbicpKSB7XG4gICAgICAgIHRvZG9tb2RhbC5vcGVuTW9kYWwoZSk7XG4gICAgICAgIGxhbmRpbmdMb2FkZXIuZGltQmFja2dyb3VuZCgpO1xuXG4gICAgfVxufSk7XG5cblxuLy9jbG9zZXMgYWRkIG5ldyB0b2RvIG1vZGFsXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGNvbnN0IGNsb3NlZCA9IHRvZG9tb2RhbC5jbG9zZU1vZGFsKGUpO1xuICAgIGlmIChjbG9zZWQpIGxhbmRpbmdMb2FkZXIudW5EaW1CYWNrZ3JvdW5kKCk7XG5cbn0pXG5cblxuXG5cblxuXG5zdWJtaXRUb2RvQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGNvbnN0IHRvZG9UaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0b2RvbmFtZScpLnZhbHVlO1xuICAgICAgICBjb25zdCB0b2RvRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG9kb2Rlc2NyaXB0aW9uJykudmFsdWU7XG4gICAgICAgIGNvbnN0IHRvZG9EYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RvZG9kYXRlJykudmFsdWU7XG4gICAgICAgIGNvbnN0IHRvZG9UaW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RvZG90aW1lJykudmFsdWU7XG4gICAgICAgIGNvbnN0IHRvZG8gPSBuZXcgVG9Ebyh0b2RvVGl0bGUsIHRvZG9EZXNjcmlwdGlvbiwgdG9kb0RhdGUsIHRvZG9UaW1lLCBmYWxzZSk7XG4gICAgICAgIHRvZG9zTGlzdC5wdXNoKHRvZG8pO1xuICAgICAgICBjb25zb2xlLmxvZyh0b2Rvc0xpc3QpXG4gICAgICAgIGxhbmRpbmdMb2FkZXIubWFpbkNvbnRlbnQubG9hZFRvZG9zKHRvZG9zTGlzdCk7XG4gICAgICAgIHRvZG9tb2RhbC5jbG9zZU1vZGFsKGUpO1xuICAgICAgICBsYW5kaW5nTG9hZGVyLmRpbUJhY2tncm91bmQoKTtcbiAgICB9KVxuXG5cblxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVG9Eb01vZGFsIHtcbiAgICBjb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NvbnRlbnQnKTtcbiAgICBtb2RhbENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXctdG9kby1jb250YWluZXInKTtcbiAgICBjb25zdHJ1Y3RvcigpIHtcblxuICAgIH1cblxuICAgIHRvZ2dsZU1vZGFsVmlzaWJpbGl0eSgpIHtcbiAgICAgICAgdGhpcy5tb2RhbENvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nKTtcbiAgICB9XG5cbiAgICBvcGVuTW9kYWwoZSkge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB0aGlzLnRvZ2dsZU1vZGFsVmlzaWJpbGl0eSgpO1xuICAgIH1cblxuICAgIGNsb3NlTW9kYWwoZSkge1xuICAgICAgICBsZXQgcmV2aWV3Tm9kZSA9IGUudGFyZ2V0O1xuICAgICAgICBsZXQgZXhpdEZvcm0gPSB0cnVlO1xuICAgICAgICBpZiAoIWUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnc3VibWl0LXRvZG8tYnV0dG9uJykpIHtcbiAgICAgICAgICAgIHdoaWxlIChyZXZpZXdOb2RlICYmIHJldmlld05vZGUubm9kZU5hbWUgIT09ICdCT0RZJykge1xuICAgICAgICAgICAgICAgIGlmIChyZXZpZXdOb2RlLmNsYXNzTGlzdC5jb250YWlucygnbmV3LXRvZG8tY29udGFpbmVyJykpIHtcbiAgICAgICAgICAgICAgICAgICAgZXhpdEZvcm0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldmlld05vZGUgPSByZXZpZXdOb2RlLnBhcmVudE5vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV4aXRGb3JtICYmICF0aGlzLm1vZGFsQ29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygnaGlkZGVuJykpIHtcbiAgICAgICAgICAgIHRoaXMubW9kYWxDb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJylcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZXhpdEZvcm07XG4gICAgfVxuXG4gICAgbG9hZE1vZGFsQ29udGVudCgpIHsgIFxuICAgICAgICAvL2RhdGVcbiAgICAgICAgY29uc3QgdGFza0RhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG9kb2RhdGUnKTtcbiAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSBnZXRDdXJyZW50RGF0ZSgpO1xuICAgICAgICB0YXNrRGF0ZS5zZXRBdHRyaWJ1dGUoJ21pbicsIGAke2N1cnJlbnREYXRlLnllYXJ9LSR7Y3VycmVudERhdGUubW9udGh9LSR7Y3VycmVudERhdGUuZGF5fWApXG5cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldEN1cnJlbnREYXRlKCkge1xuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgY29uc3QgZGF5ID0gZGF0ZS5nZXREYXRlKCk7XG4gICAgbGV0IG1vbnRoID0gZGF0ZS5nZXRNb250aCgpICsgMTtcbiAgICBpZiAobW9udGgudG9TdHJpbmcubGVuZ3RoIDwgMikgbW9udGggPSAnMCcgKyBtb250aDtcbiAgICByZXR1cm4geyB5ZWFyLCBtb250aCwgZGF5IH1cbn0iXSwibmFtZXMiOlsiTWFpbkNvbnRlbnQiLCJjb250ZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwibWFpbkNvbnRlbnRDb250YWluZXIiLCJ0b2Rvc2NvbnRhaW5lciIsImNvbnN0cnVjdG9yIiwibG9hZFRvZG9zIiwiYXJyIiwiaSIsInRoaXMiLCJpbm5lckhUTUwiLCJ0b2RvIiwidG9kb0NvbnRhaW5lciIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJjb21wbGV0ZSIsInRvZG9UaXRsZSIsInRleHRDb250ZW50IiwidGl0bGUiLCJ0b2RvRGVzY3JpcHRpb24iLCJkZXNjcmlwdGlvbiIsInRvZG9EYXRlIiwiZHVlRGF0ZSIsInNsaWNlIiwidG9kb1RpbWUiLCJ0aW1lIiwiY29tcGxldGVkIiwiYXBwZW5kIiwiYWRkQ29tcGxldGlvbkJ1dHRvbkV2ZW50IiwiY29tcGxldGlvbkJ1dHRvbiIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJidXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImNvbnRhaW5zIiwicmVtb3ZlIiwidGFyZ2V0IiwicGFyZW50Tm9kZSIsImdldEF0dHJpYnV0ZSIsIlRvRG8iLCJ0b2Rvc0xpc3QiLCJsYW5kaW5nTG9hZGVyIiwibmF2IiwibWVudSIsIm1haW5Db250ZW50IiwiZGltQmFja2dyb3VuZCIsInN0eWxlIiwiZmlsdGVyIiwidW5EaW1CYWNrZ3JvdW5kIiwicmVtb3ZlQXR0cmlidXRlIiwidG9kb21vZGFsIiwibW9kYWxDb250YWluZXIiLCJ0b2dnbGVNb2RhbFZpc2liaWxpdHkiLCJ0b2dnbGUiLCJvcGVuTW9kYWwiLCJzdG9wUHJvcGFnYXRpb24iLCJjbG9zZU1vZGFsIiwicmV2aWV3Tm9kZSIsImV4aXRGb3JtIiwibm9kZU5hbWUiLCJsb2FkTW9kYWxDb250ZW50IiwidGFza0RhdGUiLCJjdXJyZW50RGF0ZSIsImRhdGUiLCJEYXRlIiwieWVhciIsImdldEZ1bGxZZWFyIiwiZGF5IiwiZ2V0RGF0ZSIsIm1vbnRoIiwiZ2V0TW9udGgiLCJ0b1N0cmluZyIsImxlbmd0aCIsImdldEN1cnJlbnREYXRlIiwibmV3VG9kb0J1dHRvbiIsInN1Ym1pdFRvZG9CdXR0b24iLCJ3aW5kb3ciLCJwcmV2ZW50RGVmYXVsdCIsInZhbHVlIiwicHVzaCIsImNvbnNvbGUiLCJsb2ciXSwic291cmNlUm9vdCI6IiJ9