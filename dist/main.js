(()=>{"use strict";class e{content=document.querySelector("#content");mainContentContainer=document.querySelector(".main-content-container");todoscontainer=document.querySelector(".todos-container");constructor(){}loadTodos(e){let o=0;this.todoscontainer.innerHTML="";for(const n of e){const e=document.createElement("div");e.classList.add("todo-container"),e.setAttribute("data-todo-index",o),!0===n.complete&&e.classList.add("completed"),o++;const c=document.createElement("h2");c.classList.add("todo-title"),c.textContent=n.title;const s=document.createElement("p");s.classList.add("todo-description"),s.textContent=n.description;const d=document.createElement("p");d.classList.add("todo-date"),d.innerHTML=`<span class="due-date-label">Due Date: </span> ${n.dueDate.slice(5,7)}/${n.dueDate.slice(8,11)}/${n.dueDate.slice(0,4)}`;const a=document.createElement("p");a.classList.add("todo-time"),""!==n.time?a.innerHTML=`<span class="due-time-label">Time Due: </span>${t(n.time)}`:a.innerHTML='<span class="due-time-label">Time Due: </span> No Time Set';const i=document.createElement("p");i.classList.add("todo-project-name"),i.innerHTML=`<span class="due-date-label">Project Name: </span> ${n.projectName}`;const l=document.createElement("button");l.setAttribute("type","button"),l.classList.add("complete-button"),!0===n.complete&&l.classList.add("completed"),!1===n.complete?l.textContent="Not Completed":l.textContent="Completed";const r=document.createElement("div");r.classList.add("todo-options"),r.innerHTML='<span class="material-symbols-outlined todo-options-icon">more_vert</span>';const u=document.createElement("div"),m=document.createElement("div");m.textContent="Remove",m.classList.add("remove-todo"),u.classList.add("todo-options-container","hidden"),u.append(m),r.append(u),e.append(c,s,d,a,i,l,r),this.todoscontainer.append(e)}}addCompletionButtonEvent(e){const t=document.querySelectorAll(".complete-button");for(const o of t)o.addEventListener("click",(t=>{o.classList.contains("completed")?(o.classList.remove("completed"),o.textContent="Not Completed",t.target.parentNode.classList.remove("completed"),e[t.target.parentNode.getAttribute("data-todo-index")].complete=!1):(o.classList.add("completed"),t.target.parentNode.classList.add("completed"),o.textContent="Completed",e[t.target.parentNode.getAttribute("data-todo-index")].complete=!0)}))}showTodoOptions(){const e=document.querySelectorAll(".todo-options-icon");for(const t of e)t.addEventListener("click",(e=>{const t=e.target.parentNode;console.log(t);const o=t.querySelector(".todo-options-container");o.classList.contains("hidden")?o.classList.remove("hidden"):o.classList.add("hidden")}))}}function t(e){return 0==+e.slice(0,2)?`${+e.slice(0,2)+12}:${e.slice(3,5)} AM`:+e.slice(0,2)<12?e+" AM":12==+e.slice(0,2)?`${e.slice(0,2)}:${e.slice(3,5)} PM`:`${+e.slice(0,2)-12}:${e.slice(3,5)} PM`}class o{constructor(e,t,o,n,c,s){this.title=e,this.description=t,this.dueDate=o,this.time=n,this.complete=c,this.projectName=s}}const n=new class{content=document.querySelector("#content");nav=document.querySelector(".navbar");constructor(){this.mainContent=new e}dimBackground(){this.nav.style.filter="brightness(50%)",this.mainContent.mainContentContainer.style.filter="brightness(50%)"}unDimBackground(){this.nav.removeAttribute("style"),this.mainContent.mainContentContainer.removeAttribute("style")}},c=new class{content=document.querySelector("#content");modalContainer=document.querySelector(".new-todo-container");constructor(){}toggleModalVisibility(){this.modalContainer.classList.toggle("hidden")}openModal(e,t){e.stopPropagation(),this.toggleModalVisibility(),this.updateProjectsSelection(t)}closeModal(e){let t=e.target,o=!0;if(!e.target.classList.contains("submit-todo-button"))for(;t&&"BODY"!==t.nodeName;){if(t.classList.contains("new-todo-container")){o=!1;break}t=t.parentNode}return o&&!this.modalContainer.classList.contains("hidden")&&this.modalContainer.classList.toggle("hidden"),o}loadModalContent(){const e=document.querySelector("#tododate"),t=function(){const e=new Date,t=e.getFullYear(),o=e.getDate();let n=e.getMonth()+1;return n.toString.length<2&&(n="0"+n),{year:t,month:n,day:o}}();e.setAttribute({min:`${t.year}-${t.month}-${t.day}`,required:!0})}clearModalContent(){document.querySelector("#todoname").value="",document.querySelector("#tododescription").value="",document.querySelector("#tododate").value="",document.querySelector("#todotime").value="",document.querySelector("#project-name").value=""}updateProjectsSelection(e){const t=document.querySelector("#project-selection");console.log(t);for(const o of e)if(null===document.getElementById(o)){const e=document.createElement("option");e.value=o,e.textContent=o,e.id=o,t.append(e)}}},s=new class{content=document.querySelector("#content");mainContainer=document.querySelector(".main-content-container");todosContainer=document.querySelector(".todos-container");projectTitle=document.createElement("h1");projectsList=[];constructor(){this.projects=[]}loadTitle(){this.projectTitle.classList.add("project-title"),this.projectTitle.textContent="Projects",this.mainContainer.insertAdjacentElement("afterbegin",this.projectTitle)}loadProjectContainers(){for(const e of this.projectsList){const t=document.createElement("div"),o=document.createElement("h2");t.classList.add("project-container"),t.setAttribute("data-project-name",e),o.textContent=e,t.append(o),this.todosContainer.append(t)}}loadTodosForProject(e){let o=0;for(const n of e){const e=document.createElement("div");e.classList.add("todo-container"),e.setAttribute("data-todo-index",o),!0===n.complete&&e.classList.add("completed"),o++;const c=document.createElement("h2");c.classList.add("todo-title"),c.textContent=n.title;const s=document.createElement("p");s.classList.add("todo-description"),s.textContent=n.description;const d=document.createElement("p");d.classList.add("todo-date"),d.innerHTML=`<span class="due-date-label">Due Date: </span> ${n.dueDate.slice(5,7)}/${n.dueDate.slice(8,11)}/${n.dueDate.slice(0,4)}`;const a=document.createElement("p");a.classList.add("todo-time"),""!==n.time?a.innerHTML=`<span class="due-time-label">Time Due: </span>${t(n.time)}`:a.innerHTML='<span class="due-time-label">Time Due: </span> No Time Set';const i=document.createElement("button");i.setAttribute("type","button"),i.classList.add("complete-button"),!0===n.complete&&i.classList.add("completed"),!1===n.complete?i.textContent="Not Completed":i.textContent="Completed";const l=document.createElement("div");l.classList.add("todo-options"),l.innerHTML='<span class="material-symbols-outlined todo-options-icon">more_vert</span>';const r=document.createElement("div"),u=document.createElement("div");u.textContent="Remove",u.classList.add("remove-todo"),r.classList.add("todo-options-container","hidden"),r.append(u),l.append(r),e.append(c,s,d,a,i,l),this.addTodosToProjectContainers(n.projectName,e)}}addTodosToProjectContainers(e,t){const o=document.querySelectorAll(".project-container");for(const n of o)e===n.getAttribute("data-project-name")&&n.append(t)}},d=[],a=document.querySelector(".todos-container"),i=document.querySelector(".new-todo-container"),l=document.querySelector(".add-todo-button"),r=document.querySelector(".submit-todo-button"),u=document.querySelector(".projects"),m=document.querySelector("#project-selection"),p=document.querySelector(".home");function L(){const e=document.querySelector(".project-name-container"),t=document.querySelector("#project-name");"New Project"===m.value?(e.classList.contains("hidden")&&e.classList.remove("hidden"),t.value=""):e.classList.contains("hidden")||e.classList.add("hidden")}function y(){const e=document.querySelectorAll(".remove-todo");for(const t of e)t.addEventListener("click",(e=>{const t=+e.target.parentNode.parentNode.parentNode.getAttribute("data-todo-index");d.splice(t,1),p.classList.contains("button-selected")?(n.mainContent.loadTodos(d),C(),h(d),y()):(document.querySelector(".todos-container").innerHTML="",v())}))}function v(){const e=d.filter((e=>"None"!==e.projectName));s.loadProjectContainers(),s.loadTodosForProject(e),h(e),C(),y();const t=document.querySelectorAll(".project-container");for(const e of t)1===e.childElementCount&&e.remove()}function h(e){const t=document.querySelectorAll(".complete-button");for(const o of t)o.addEventListener("click",(t=>{o.classList.contains("completed")?(o.classList.remove("completed"),o.textContent="Not Completed",t.target.parentNode.classList.remove("completed"),e[t.target.parentNode.getAttribute("data-todo-index")].complete=!1):(o.classList.add("completed"),t.target.parentNode.classList.add("completed"),o.textContent="Completed",e[t.target.parentNode.getAttribute("data-todo-index")].complete=!0)}))}function C(){const e=document.querySelectorAll(".todo-options-icon");for(const t of e)t.addEventListener("click",(e=>{const t=e.target.parentNode.querySelector(".todo-options-container");t.classList.contains("hidden")?t.classList.remove("hidden"):t.classList.add("hidden")}))}l.addEventListener("click",(e=>{i.classList.contains("hidden")&&(c.openModal(e,s.projectsList),c.clearModalContent(),n.dimBackground(),m.value="none",L())})),window.addEventListener("click",(e=>{c.closeModal(e)&&n.unDimBackground()})),p.addEventListener("click",(()=>{n.mainContent.loadTodos(d),u.classList.remove("button-selected"),p.classList.add("button-selected"),C(),h(d),y(),null!==document.querySelector(".project-title")&&document.querySelector(".project-title").remove()})),u.addEventListener("click",(()=>{a.innerHTML="",p.classList.remove("button-selected"),u.classList.add("button-selected"),s.loadTitle(),v()})),m.addEventListener("change",(()=>{L()})),r.addEventListener("click",(e=>{if(document.querySelector("form").checkValidity()){e.preventDefault();const t=document.querySelector("#todoname").value,a=document.querySelector("#tododescription").value,i=document.querySelector("#tododate").value,l=document.querySelector("#todotime").value;let r=document.querySelector("#project-name").value;const u=document.querySelector("#project-selection");""===r&&"none"===u.value?r="None":""===r&&"none"!==u.value&&(r=u.value);const m=new o(t,a,i,l,!1,r);d.push(m),s.projectsList.includes(r)||"None"===r||s.projectsList.push(r),console.log(d),c.closeModal(e),n.dimBackground(),p.classList.contains("button-selected")?(n.mainContent.loadTodos(d),C(),h(d),y()):(document.querySelector(".todos-container").innerHTML="",v())}else document.querySelector("form").reportValidity(),e.stopPropagation()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFVLEtBQ3hDdUUsR0FBOEIsSUFHbENILEVBQWlCcEUsaUJBQWlCLFNBQVVDLElBRXhDLEdBRGtCeEMsU0FBU0MsY0FBYyxRQUFRd0gsZ0JBSzVDLENBQ0RqRixFQUFFa0YsaUJBQ0YsTUFBTXpHLEVBQVlqQixTQUFTQyxjQUFjLGFBQWFzRixNQUNoRG5FLEVBQWtCcEIsU0FBU0MsY0FBYyxvQkFBb0JzRixNQUM3RGpFLEVBQVd0QixTQUFTQyxjQUFjLGFBQWFzRixNQUMvQzlELEVBQVd6QixTQUFTQyxjQUFjLGFBQWFzRixNQUNyRCxJQUFJMUQsRUFBYzdCLFNBQVNDLGNBQWMsaUJBQWlCc0YsTUFDMUQsTUFBTUMsRUFBbUJ4RixTQUFTQyxjQUFjLHNCQUM1QixLQUFoQjRCLEdBQWlELFNBQTNCMkQsRUFBaUJELE1BQ3ZDMUQsRUFBYyxPQUVPLEtBQWhCQSxHQUFpRCxTQUEzQjJELEVBQWlCRCxRQUM1QzFELEVBQWMyRCxFQUFpQkQsT0FJbkMsTUFBTTdFLEVBQU8sSUFBSXlDLEVBQUtsQyxFQUFXRyxFQUFpQkUsRUFBVUcsR0FBVSxFQUFPSSxHQUM3RTRFLEVBQVVrQixLQUFLakgsR0FDVmtCLEVBQVNvRSxhQUFhNEIsU0FBUy9GLElBQWdDLFNBQWhCQSxHQUF3QkQsRUFBU29FLGFBQWEyQixLQUFLOUYsR0FDdkdtQixRQUFRQyxJQUFJd0QsR0FDWjdDLEVBQVVRLFdBQVc1QixHQUNyQlksRUFBY0csZ0JBQ1ZzRCxFQUFXaEcsVUFBVTRCLFNBQVMsb0JBQzlCVyxFQUFjRSxZQUFZakQsVUFBVW9HLEdBQ3BDM0QsSUFDQVgsRUFBeUJzRSxHQUN6Qk8sTUFHQWhILFNBQVNDLGNBQWMsb0JBQW9CUSxVQUFZLEdBQ3ZEMkcsSUFHUixNQXBDSXBILFNBQVNDLGNBQWMsUUFBUTRILGlCQUMvQnJGLEVBQUUwQixpQkFtQ04sRyIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG8tbGlzdC1vZGlucHJvamVjdC8uL3NyYy9sb2FkaG9tZS5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3Qtb2RpbnByb2plY3QvLi9zcmMvdGFza3MuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0LW9kaW5wcm9qZWN0Ly4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC1vZGlucHJvamVjdC8uL3NyYy90b2RvbW9kYWwuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0LW9kaW5wcm9qZWN0Ly4vc3JjL3Byb2plY3RzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIExhbmRpbmdQYWdlIHtcbiAgICBjb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NvbnRlbnQnKTtcbiAgICBuYXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmF2YmFyJyk7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMubWFpbkNvbnRlbnQgPSBuZXcgTWFpbkNvbnRlbnQ7XG4gICAgfVxuXG4gICAgZGltQmFja2dyb3VuZCgpIHtcbiAgICAgICAgdGhpcy5uYXYuc3R5bGUuZmlsdGVyID0gJ2JyaWdodG5lc3MoNTAlKSc7XG4gICAgICAgIHRoaXMubWFpbkNvbnRlbnQubWFpbkNvbnRlbnRDb250YWluZXIuc3R5bGUuZmlsdGVyID0gJ2JyaWdodG5lc3MoNTAlKSc7XG4gICAgfVxuXG4gICAgdW5EaW1CYWNrZ3JvdW5kKCkge1xuICAgICAgICB0aGlzLm5hdi5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgIHRoaXMubWFpbkNvbnRlbnQubWFpbkNvbnRlbnRDb250YWluZXIucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgIH1cblxufVxuXG5cbmNsYXNzIE1haW5Db250ZW50IHtcbiAgICBjb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NvbnRlbnQnKTtcbiAgICBtYWluQ29udGVudENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluLWNvbnRlbnQtY29udGFpbmVyJyk7XG4gICAgdG9kb3Njb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9kb3MtY29udGFpbmVyJyk7XG4gICAgY29uc3RydWN0b3IoKSB7XG5cbiAgICB9XG5cblxuICAgIGxvYWRUb2RvcyhhcnIpIHtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICB0aGlzLnRvZG9zY29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuICAgICAgICBmb3IgKGNvbnN0IHRvZG8gb2YgYXJyKSB7XG4gICAgICAgICAgICBjb25zdCB0b2RvQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICB0b2RvQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3RvZG8tY29udGFpbmVyJyk7XG4gICAgICAgICAgICB0b2RvQ29udGFpbmVyLnNldEF0dHJpYnV0ZSgnZGF0YS10b2RvLWluZGV4JywgaSk7XG4gICAgICAgICAgICBpZiAodG9kby5jb21wbGV0ZSA9PT0gdHJ1ZSkgdG9kb0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdjb21wbGV0ZWQnKTtcbiAgICAgICAgICAgIGkrK1xuICAgICAgICAgICAgLy90aXRsZVxuICAgICAgICAgICAgY29uc3QgdG9kb1RpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDInKTtcbiAgICAgICAgICAgIHRvZG9UaXRsZS5jbGFzc0xpc3QuYWRkKCd0b2RvLXRpdGxlJyk7XG4gICAgICAgICAgICB0b2RvVGl0bGUudGV4dENvbnRlbnQgPSB0b2RvLnRpdGxlO1xuXG4gICAgICAgICAgICAvL2Rlc2NyaXB0aW9uXG4gICAgICAgICAgICBjb25zdCB0b2RvRGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgICAgICAgICB0b2RvRGVzY3JpcHRpb24uY2xhc3NMaXN0LmFkZCgndG9kby1kZXNjcmlwdGlvbicpO1xuICAgICAgICAgICAgdG9kb0Rlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gdG9kby5kZXNjcmlwdGlvbjtcblxuICAgICAgICAgICAgLy9kYXRlXG4gICAgICAgICAgICBjb25zdCB0b2RvRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgICAgICAgIHRvZG9EYXRlLmNsYXNzTGlzdC5hZGQoJ3RvZG8tZGF0ZScpO1xuICAgICAgICAgICAgdG9kb0RhdGUuaW5uZXJIVE1MID0gYDxzcGFuIGNsYXNzPVwiZHVlLWRhdGUtbGFiZWxcIj5EdWUgRGF0ZTogPC9zcGFuPiAke3RvZG8uZHVlRGF0ZS5zbGljZSg1LCA3KX0vJHt0b2RvLmR1ZURhdGUuc2xpY2UoOCwgMTEpfS8ke3RvZG8uZHVlRGF0ZS5zbGljZSgwLCA0KX1gO1xuXG4gICAgICAgICAgICAvL3RpbWVcbiAgICAgICAgICAgIGNvbnN0IHRvZG9UaW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgICAgICAgdG9kb1RpbWUuY2xhc3NMaXN0LmFkZCgndG9kby10aW1lJyk7XG4gICAgICAgICAgICBpZiAodG9kby50aW1lICE9PSAnJykge1xuICAgICAgICAgICAgICAgIHRvZG9UaW1lLmlubmVySFRNTCA9IGA8c3BhbiBjbGFzcz1cImR1ZS10aW1lLWxhYmVsXCI+VGltZSBEdWU6IDwvc3Bhbj4ke2Zvcm1hdFRpbWUodG9kby50aW1lKX1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdG9kb1RpbWUuaW5uZXJIVE1MID0gYDxzcGFuIGNsYXNzPVwiZHVlLXRpbWUtbGFiZWxcIj5UaW1lIER1ZTogPC9zcGFuPiBObyBUaW1lIFNldGA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vcHJvamVjdCBzZWxlY3Rpb25cbiAgICAgICAgICAgIGNvbnN0IHByb2plY3RzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpXG4gICAgICAgICAgICBwcm9qZWN0cy5jbGFzc0xpc3QuYWRkKCd0b2RvLXByb2plY3QtbmFtZScpO1xuICAgICAgICAgICAgcHJvamVjdHMuaW5uZXJIVE1MID0gYDxzcGFuIGNsYXNzPVwiZHVlLWRhdGUtbGFiZWxcIj5Qcm9qZWN0IE5hbWU6IDwvc3Bhbj4gJHt0b2RvLnByb2plY3ROYW1lfWA7XG5cblxuXG4gICAgICAgICAgICAvL2NvbXBsZXRpb24gYnV0dG9uXG4gICAgICAgICAgICBjb25zdCBjb21wbGV0ZWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgICAgIGNvbXBsZXRlZC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnYnV0dG9uJylcbiAgICAgICAgICAgIGNvbXBsZXRlZC5jbGFzc0xpc3QuYWRkKCdjb21wbGV0ZS1idXR0b24nKTtcbiAgICAgICAgICAgIGlmICh0b2RvLmNvbXBsZXRlID09PSB0cnVlKSBjb21wbGV0ZWQuY2xhc3NMaXN0LmFkZCgnY29tcGxldGVkJyk7XG4gICAgICAgICAgICAodG9kby5jb21wbGV0ZSA9PT0gZmFsc2UpID8gY29tcGxldGVkLnRleHRDb250ZW50ID0gJ05vdCBDb21wbGV0ZWQnIDogY29tcGxldGVkLnRleHRDb250ZW50ID0gJ0NvbXBsZXRlZCc7XG5cbiAgICAgICAgICAgIC8vb3B0aW9ucyBtZW51XG4gICAgICAgICAgICBjb25zdCBvcHRpb25zTWVudUNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgb3B0aW9uc01lbnVDb250YWluZXIuY2xhc3NMaXN0LmFkZCgndG9kby1vcHRpb25zJyk7XG4gICAgICAgICAgICBvcHRpb25zTWVudUNvbnRhaW5lci5pbm5lckhUTUwgPSAnPHNwYW4gY2xhc3M9XCJtYXRlcmlhbC1zeW1ib2xzLW91dGxpbmVkIHRvZG8tb3B0aW9ucy1pY29uXCI+bW9yZV92ZXJ0PC9zcGFuPic7XG5cbiAgICAgICAgICAgIC8vb3B0aW9uc1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9uc0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgY29uc3QgcmVtb3ZlVG9kbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgcmVtb3ZlVG9kby50ZXh0Q29udGVudCA9ICdSZW1vdmUnO1xuICAgICAgICAgICAgcmVtb3ZlVG9kby5jbGFzc0xpc3QuYWRkKCdyZW1vdmUtdG9kbycpO1xuICAgICAgICAgICAgb3B0aW9uc0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCd0b2RvLW9wdGlvbnMtY29udGFpbmVyJywgJ2hpZGRlbicpO1xuICAgICAgICAgICAgb3B0aW9uc0NvbnRhaW5lci5hcHBlbmQocmVtb3ZlVG9kbyk7XG5cblxuXG4gICAgICAgICAgICBvcHRpb25zTWVudUNvbnRhaW5lci5hcHBlbmQob3B0aW9uc0NvbnRhaW5lcik7XG4gICAgICAgICAgICB0b2RvQ29udGFpbmVyLmFwcGVuZCh0b2RvVGl0bGUsIHRvZG9EZXNjcmlwdGlvbiwgdG9kb0RhdGUsIHRvZG9UaW1lLCBwcm9qZWN0cywgY29tcGxldGVkLCBvcHRpb25zTWVudUNvbnRhaW5lcik7XG4gICAgICAgICAgICB0aGlzLnRvZG9zY29udGFpbmVyLmFwcGVuZCh0b2RvQ29udGFpbmVyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFkZENvbXBsZXRpb25CdXR0b25FdmVudChhcnIpIHtcbiAgICAgICAgY29uc3QgY29tcGxldGlvbkJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jb21wbGV0ZS1idXR0b24nKTtcbiAgICAgICAgZm9yIChjb25zdCBidXR0b24gb2YgY29tcGxldGlvbkJ1dHRvbikge1xuICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoYnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnY29tcGxldGVkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2NvbXBsZXRlZCcpO1xuICAgICAgICAgICAgICAgICAgICBidXR0b24udGV4dENvbnRlbnQgPSAnTm90IENvbXBsZXRlZCdcbiAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQucGFyZW50Tm9kZS5jbGFzc0xpc3QucmVtb3ZlKCdjb21wbGV0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgYXJyW2UudGFyZ2V0LnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlKCdkYXRhLXRvZG8taW5kZXgnKV0uY29tcGxldGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdjb21wbGV0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKCdjb21wbGV0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gJ0NvbXBsZXRlZCc7XG4gICAgICAgICAgICAgICAgICAgIGFycltlLnRhcmdldC5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZSgnZGF0YS10b2RvLWluZGV4JyldLmNvbXBsZXRlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNob3dUb2RvT3B0aW9ucygpIHtcbiAgICAgICAgY29uc3QgdG9kb09wdGlvbkJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50b2RvLW9wdGlvbnMtaWNvbicpO1xuICAgICAgICBmb3IgKGNvbnN0IGJ1dHRvbiBvZiB0b2RvT3B0aW9uQnV0dG9uKSB7XG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvZG8gPSBlLnRhcmdldC5wYXJlbnROb2RlO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRvZG8pXG4gICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRvZG8ucXVlcnlTZWxlY3RvcignLnRvZG8tb3B0aW9ucy1jb250YWluZXInKTtcbiAgICAgICAgICAgICAgICAob3B0aW9ucy5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGRlbicpKSA/IG9wdGlvbnMuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJykgOiBvcHRpb25zLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFRpbWUodGltZSkge1xuICAgIGlmICgrdGltZS5zbGljZSgwLCAyKSA9PT0gMCkgcmV0dXJuIChgJHsrdGltZS5zbGljZSgwLCAyKSArIDEyfToke3RpbWUuc2xpY2UoMywgNSl9IEFNYCk7XG4gICAgZWxzZSBpZiAoK3RpbWUuc2xpY2UoMCwgMikgPCAxMikgcmV0dXJuICh0aW1lICs9ICcgQU0nKTtcbiAgICBlbHNlIGlmICgrdGltZS5zbGljZSgwLCAyKSA9PT0gMTIpIHJldHVybiAoYCR7dGltZS5zbGljZSgwLCAyKX06JHt0aW1lLnNsaWNlKDMsIDUpfSBQTWApO1xuICAgIGVsc2UgcmV0dXJuIChgJHsrdGltZS5zbGljZSgwLCAyKSAtIDEyfToke3RpbWUuc2xpY2UoMywgNSl9IFBNYCk7XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVG9EbyB7XG4gICAgY29uc3RydWN0b3IgKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgdGltZSwgY29tcGxldGUsIHByb2plY3ROYW1lKSB7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgICAgICB0aGlzLmR1ZURhdGUgPSBkdWVEYXRlO1xuICAgICAgICB0aGlzLnRpbWUgPSB0aW1lO1xuICAgICAgICB0aGlzLmNvbXBsZXRlID0gY29tcGxldGU7XG4gICAgICAgIHRoaXMucHJvamVjdE5hbWUgPSBwcm9qZWN0TmFtZTtcbiAgICB9XG59IiwiaW1wb3J0IHsgZGVmYXVsdCBhcyBMYW5kaW5nUGFnZSB9IGZyb20gXCIuL2xvYWRob21lLmpzXCI7XG5pbXBvcnQgUHJvamVjdHNQYWdlIGZyb20gXCIuL3Byb2plY3RzLmpzXCI7XG5pbXBvcnQgVG9EbyBmcm9tIFwiLi90YXNrcy5qc1wiO1xuaW1wb3J0IFRvRG9Nb2RhbCBmcm9tIFwiLi90b2RvbW9kYWwuanNcIjtcblxuXG5jb25zdCBsYW5kaW5nTG9hZGVyID0gbmV3IExhbmRpbmdQYWdlKCk7XG5jb25zdCB0b2RvbW9kYWwgPSBuZXcgVG9Eb01vZGFsKCk7XG5jb25zdCBwcm9qZWN0cyA9IG5ldyBQcm9qZWN0c1BhZ2UoKTtcbmNvbnN0IHRvZG9zTGlzdCA9IFtdO1xuY29uc3QgdG9kb0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b2Rvcy1jb250YWluZXInKTtcbmNvbnN0IG1vZGFsQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5ldy10b2RvLWNvbnRhaW5lcicpO1xuY29uc3QgbmV3VG9kb0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtdG9kby1idXR0b24nKTtcbmNvbnN0IHN1Ym1pdFRvZG9CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3VibWl0LXRvZG8tYnV0dG9uJyk7XG5jb25zdCBwcm9qZWN0c0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0cycpO1xuY29uc3QgcHJvamVjdFNlbGVjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9qZWN0LXNlbGVjdGlvbicpO1xuY29uc3QgaG9tZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ob21lJyk7XG5cbi8vcmVzZXRzIGh0bWwgc2VsZWN0IGZvciBuZXd0b2RvIHByb2plY3Qgc2VsZWN0aW9uXG5mdW5jdGlvbiByZXNldE5ld1RvZG9Qcm9qZWN0U2VsZWN0aW9uKCkge1xuICAgIGNvbnN0IHByb2plY3ROYW1lQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3QtbmFtZS1jb250YWluZXInKTtcbiAgICBjb25zdCBwcm9qZWN0VGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvamVjdC1uYW1lJylcbiAgICBpZiAocHJvamVjdFNlbGVjdGlvbi52YWx1ZSA9PT0gJ05ldyBQcm9qZWN0Jykge1xuICAgICAgICBpZiAocHJvamVjdE5hbWVDb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKSkgcHJvamVjdE5hbWVDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgIHByb2plY3RUaXRsZS52YWx1ZSA9ICcnO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKCFwcm9qZWN0TmFtZUNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGRlbicpKSBwcm9qZWN0TmFtZUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICB9XG59XG4vL2V2ZW50IGxpc3RlbmVyc1xuLy9vcGVucyB0aGUgYWRkIG5ldyB0b2RvIG1vZGFsXG5uZXdUb2RvQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICBpZiAobW9kYWxDb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKSkge1xuICAgICAgICB0b2RvbW9kYWwub3Blbk1vZGFsKGUsIHByb2plY3RzLnByb2plY3RzTGlzdCk7XG4gICAgICAgIHRvZG9tb2RhbC5jbGVhck1vZGFsQ29udGVudCgpO1xuICAgICAgICBsYW5kaW5nTG9hZGVyLmRpbUJhY2tncm91bmQoKTtcbiAgICAgICAgLy9yZXNldHMgZGVmYXVsdCBwcm9qZWN0IHNlbGVjdGlvblxuICAgICAgICBwcm9qZWN0U2VsZWN0aW9uLnZhbHVlID0gJ25vbmUnO1xuICAgICAgICByZXNldE5ld1RvZG9Qcm9qZWN0U2VsZWN0aW9uKCk7XG4gICAgfVxufSk7XG5cblxuLy9jbG9zZXMgYWRkIG5ldyB0b2RvIG1vZGFsXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGNvbnN0IGNsb3NlZCA9IHRvZG9tb2RhbC5jbG9zZU1vZGFsKGUpO1xuICAgIGlmIChjbG9zZWQpIGxhbmRpbmdMb2FkZXIudW5EaW1CYWNrZ3JvdW5kKCk7XG5cbn0pXG5cbmhvbWVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgbGFuZGluZ0xvYWRlci5tYWluQ29udGVudC5sb2FkVG9kb3ModG9kb3NMaXN0KTtcbiAgICBwcm9qZWN0c0J1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdidXR0b24tc2VsZWN0ZWQnKTtcbiAgICBob21lQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2J1dHRvbi1zZWxlY3RlZCcpO1xuICAgIHNob3dUb2RvT3B0aW9ucygpO1xuICAgIGFkZENvbXBsZXRpb25CdXR0b25FdmVudCh0b2Rvc0xpc3QpO1xuICAgIGFkZFJlbW92ZVRvZG9MaXN0ZW5lcigpO1xuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdC10aXRsZScpICE9PSBudWxsKSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdC10aXRsZScpLnJlbW92ZSgpO1xufSlcblxucHJvamVjdHNCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgdG9kb0NvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcbiAgICBob21lQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2J1dHRvbi1zZWxlY3RlZCcpO1xuICAgIHByb2plY3RzQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2J1dHRvbi1zZWxlY3RlZCcpO1xuICAgIHByb2plY3RzLmxvYWRUaXRsZSgpO1xuICAgIHJlbG9hZFByb2plY3RUb2RvcygpO1xufSlcblxucHJvamVjdFNlbGVjdGlvbi5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgcmVzZXROZXdUb2RvUHJvamVjdFNlbGVjdGlvbigpO1xufSlcblxuc3VibWl0VG9kb0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgbGV0IGlzRm9ybVZhbGlkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybScpLmNoZWNrVmFsaWRpdHkoKTtcbiAgICBpZiAoIWlzRm9ybVZhbGlkKSB7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKS5yZXBvcnRWYWxpZGl0eSgpO1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBjb25zdCB0b2RvVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG9kb25hbWUnKS52YWx1ZTtcbiAgICAgICAgY29uc3QgdG9kb0Rlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RvZG9kZXNjcmlwdGlvbicpLnZhbHVlO1xuICAgICAgICBjb25zdCB0b2RvRGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0b2RvZGF0ZScpLnZhbHVlO1xuICAgICAgICBjb25zdCB0b2RvVGltZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0b2RvdGltZScpLnZhbHVlO1xuICAgICAgICBsZXQgcHJvamVjdE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvamVjdC1uYW1lJykudmFsdWU7XG4gICAgICAgIGNvbnN0IHByb2plY3RTZWxlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvamVjdC1zZWxlY3Rpb24nKTtcbiAgICAgICAgaWYgKHByb2plY3ROYW1lID09PSAnJyAmJiBwcm9qZWN0U2VsZWN0aW9uLnZhbHVlID09PSAnbm9uZScpIHtcbiAgICAgICAgICAgIHByb2plY3ROYW1lID0gJ05vbmUnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHByb2plY3ROYW1lID09PSAnJyAmJiBwcm9qZWN0U2VsZWN0aW9uLnZhbHVlICE9PSAnbm9uZScpe1xuICAgICAgICAgICAgcHJvamVjdE5hbWUgPSBwcm9qZWN0U2VsZWN0aW9uLnZhbHVlO31cbiAgICAgICAgZWxzZSBpZihwcm9qZWN0TmFtZSAhPT0gJycpe1xuICAgICAgICAgICAgcHJvamVjdE5hbWUgPSBwcm9qZWN0TmFtZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0b2RvID0gbmV3IFRvRG8odG9kb1RpdGxlLCB0b2RvRGVzY3JpcHRpb24sIHRvZG9EYXRlLCB0b2RvVGltZSwgZmFsc2UsIHByb2plY3ROYW1lKTtcbiAgICAgICAgdG9kb3NMaXN0LnB1c2godG9kbyk7XG4gICAgICAgIGlmICghcHJvamVjdHMucHJvamVjdHNMaXN0LmluY2x1ZGVzKHByb2plY3ROYW1lKSAmJiBwcm9qZWN0TmFtZSAhPT0gJ05vbmUnKSBwcm9qZWN0cy5wcm9qZWN0c0xpc3QucHVzaChwcm9qZWN0TmFtZSk7XG4gICAgICAgIGNvbnNvbGUubG9nKHRvZG9zTGlzdClcbiAgICAgICAgdG9kb21vZGFsLmNsb3NlTW9kYWwoZSk7XG4gICAgICAgIGxhbmRpbmdMb2FkZXIuZGltQmFja2dyb3VuZCgpO1xuICAgICAgICBpZiAoaG9tZUJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ2J1dHRvbi1zZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICBsYW5kaW5nTG9hZGVyLm1haW5Db250ZW50LmxvYWRUb2Rvcyh0b2Rvc0xpc3QpO1xuICAgICAgICAgICAgc2hvd1RvZG9PcHRpb25zKCk7XG4gICAgICAgICAgICBhZGRDb21wbGV0aW9uQnV0dG9uRXZlbnQodG9kb3NMaXN0KTtcbiAgICAgICAgICAgIGFkZFJlbW92ZVRvZG9MaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvZG9zLWNvbnRhaW5lcicpLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgcmVsb2FkUHJvamVjdFRvZG9zKCk7XG4gICAgICAgIH1cblxuICAgIH1cbn0pXG5cblxuXG5mdW5jdGlvbiBhZGRSZW1vdmVUb2RvTGlzdGVuZXIoKSB7XG4gICAgY29uc3QgcmVtb3ZlQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5yZW1vdmUtdG9kbycpO1xuICAgIGZvciAoY29uc3QgYnV0dG9uIG9mIHJlbW92ZUJ1dHRvbnMpIHtcbiAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRvZG9Db250YWluZXIgPSBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIGNvbnN0IHRvZG9pbmRleCA9ICt0b2RvQ29udGFpbmVyLmdldEF0dHJpYnV0ZSgnZGF0YS10b2RvLWluZGV4Jyk7XG4gICAgICAgICAgICB0b2Rvc0xpc3Quc3BsaWNlKHRvZG9pbmRleCwgMSk7XG4gICAgICAgICAgICBpZiAoaG9tZUJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ2J1dHRvbi1zZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICAgICAgbGFuZGluZ0xvYWRlci5tYWluQ29udGVudC5sb2FkVG9kb3ModG9kb3NMaXN0KTtcbiAgICAgICAgICAgICAgICBzaG93VG9kb09wdGlvbnMoKTtcbiAgICAgICAgICAgICAgICBhZGRDb21wbGV0aW9uQnV0dG9uRXZlbnQodG9kb3NMaXN0KTtcbiAgICAgICAgICAgICAgICBhZGRSZW1vdmVUb2RvTGlzdGVuZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvZG9zLWNvbnRhaW5lcicpLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgICAgIHJlbG9hZFByb2plY3RUb2RvcygpO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSlcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHJlbG9hZFByb2plY3RUb2RvcyAoKSB7XG4gICAgY29uc3QgcHJvamVjdFRvZG9zID0gdG9kb3NMaXN0LmZpbHRlcihhID0+IGEucHJvamVjdE5hbWUgIT09ICdOb25lJyk7XG4gICAgcHJvamVjdHMubG9hZFByb2plY3RDb250YWluZXJzKCk7XG4gICAgcHJvamVjdHMubG9hZFRvZG9zRm9yUHJvamVjdChwcm9qZWN0VG9kb3MpO1xuICAgIGFkZENvbXBsZXRpb25CdXR0b25FdmVudChwcm9qZWN0VG9kb3MpO1xuICAgIHNob3dUb2RvT3B0aW9ucygpO1xuICAgIGFkZFJlbW92ZVRvZG9MaXN0ZW5lcigpO1xuICAgIGNvbnN0IHByb2plY3RDb250YWluZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnByb2plY3QtY29udGFpbmVyJyk7XG4gICAgZm9yKGNvbnN0IHByb2plY3RDb250YWluZXIgb2YgcHJvamVjdENvbnRhaW5lcnMpe1xuICAgIGlmKHByb2plY3RDb250YWluZXIuY2hpbGRFbGVtZW50Q291bnQgPT09IDEpIHtcbiAgICAgICAgcHJvamVjdENvbnRhaW5lci5yZW1vdmUoKTtcbiAgICB9XG59XG59XG5cbmZ1bmN0aW9uIGFkZENvbXBsZXRpb25CdXR0b25FdmVudChhcnIpIHtcbiAgICBjb25zdCBjb21wbGV0aW9uQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNvbXBsZXRlLWJ1dHRvbicpO1xuICAgIGZvciAoY29uc3QgYnV0dG9uIG9mIGNvbXBsZXRpb25CdXR0b24pIHtcbiAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGlmIChidXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdjb21wbGV0ZWQnKSkge1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdjb21wbGV0ZWQnKTtcbiAgICAgICAgICAgICAgICBidXR0b24udGV4dENvbnRlbnQgPSAnTm90IENvbXBsZXRlZCdcbiAgICAgICAgICAgICAgICBlLnRhcmdldC5wYXJlbnROb2RlLmNsYXNzTGlzdC5yZW1vdmUoJ2NvbXBsZXRlZCcpO1xuICAgICAgICAgICAgICAgIGFycltlLnRhcmdldC5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZSgnZGF0YS10b2RvLWluZGV4JyldLmNvbXBsZXRlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnY29tcGxldGVkJyk7XG4gICAgICAgICAgICAgICAgZS50YXJnZXQucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKCdjb21wbGV0ZWQnKTtcbiAgICAgICAgICAgICAgICBidXR0b24udGV4dENvbnRlbnQgPSAnQ29tcGxldGVkJztcbiAgICAgICAgICAgICAgICBhcnJbZS50YXJnZXQucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdG9kby1pbmRleCcpXS5jb21wbGV0ZSA9IHRydWU7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KVxuICAgIH1cbn1cblxuZnVuY3Rpb24gc2hvd1RvZG9PcHRpb25zKCkge1xuICAgIGNvbnN0IHRvZG9PcHRpb25CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudG9kby1vcHRpb25zLWljb24nKTtcbiAgICBmb3IgKGNvbnN0IGJ1dHRvbiBvZiB0b2RvT3B0aW9uQnV0dG9uKSB7XG4gICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0b2RvID0gZS50YXJnZXQucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0b2RvLnF1ZXJ5U2VsZWN0b3IoJy50b2RvLW9wdGlvbnMtY29udGFpbmVyJyk7XG4gICAgICAgICAgICAob3B0aW9ucy5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGRlbicpKSA/IG9wdGlvbnMuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJykgOiBvcHRpb25zLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICB9KVxuICAgIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBUb0RvTW9kYWwge1xuICAgIGNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY29udGVudCcpO1xuICAgIG1vZGFsQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5ldy10b2RvLWNvbnRhaW5lcicpO1xuICAgIGNvbnN0cnVjdG9yKCkge1xuXG4gICAgfVxuXG4gICAgdG9nZ2xlTW9kYWxWaXNpYmlsaXR5KCkge1xuICAgICAgICB0aGlzLm1vZGFsQ29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpO1xuICAgIH1cblxuICAgIG9wZW5Nb2RhbChlLCBwcm9qZWN0TGlzdCkge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB0aGlzLnRvZ2dsZU1vZGFsVmlzaWJpbGl0eSgpO1xuICAgICAgICB0aGlzLnVwZGF0ZVByb2plY3RzU2VsZWN0aW9uKHByb2plY3RMaXN0KTtcbiAgICB9XG5cbiAgICBjbG9zZU1vZGFsKGUpIHtcbiAgICAgICAgbGV0IHJldmlld05vZGUgPSBlLnRhcmdldDtcbiAgICAgICAgbGV0IGV4aXRGb3JtID0gdHJ1ZTtcbiAgICAgICAgaWYgKCFlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3N1Ym1pdC10b2RvLWJ1dHRvbicpKSB7XG4gICAgICAgICAgICB3aGlsZSAocmV2aWV3Tm9kZSAmJiByZXZpZXdOb2RlLm5vZGVOYW1lICE9PSAnQk9EWScpIHtcbiAgICAgICAgICAgICAgICBpZiAocmV2aWV3Tm9kZS5jbGFzc0xpc3QuY29udGFpbnMoJ25ldy10b2RvLWNvbnRhaW5lcicpKSB7XG4gICAgICAgICAgICAgICAgICAgIGV4aXRGb3JtID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXZpZXdOb2RlID0gcmV2aWV3Tm9kZS5wYXJlbnROb2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChleGl0Rm9ybSAmJiAhdGhpcy5tb2RhbENvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGRlbicpKSB7XG4gICAgICAgICAgICB0aGlzLm1vZGFsQ29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV4aXRGb3JtO1xuICAgIH1cblxuICAgIGxvYWRNb2RhbENvbnRlbnQoKSB7XG4gICAgICAgIC8vZGF0ZVxuICAgICAgICBjb25zdCB0YXNrRGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0b2RvZGF0ZScpO1xuICAgICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IGdldEN1cnJlbnREYXRlKCk7XG4gICAgICAgIHRhc2tEYXRlLnNldEF0dHJpYnV0ZSh7J21pbic6IGAke2N1cnJlbnREYXRlLnllYXJ9LSR7Y3VycmVudERhdGUubW9udGh9LSR7Y3VycmVudERhdGUuZGF5fWAsICdyZXF1aXJlZCc6IHRydWV9KVxuXG4gICAgfVxuXG4gICAgY2xlYXJNb2RhbENvbnRlbnQoKSB7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0b2RvbmFtZScpLnZhbHVlID0gJyc7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0b2RvZGVzY3JpcHRpb24nKS52YWx1ZSA9ICcnO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG9kb2RhdGUnKS52YWx1ZSA9ICcnO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG9kb3RpbWUnKS52YWx1ZSA9ICcnO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvamVjdC1uYW1lJykudmFsdWUgPSAnJztcblxuICAgIH1cblxuICAgIHVwZGF0ZVByb2plY3RzU2VsZWN0aW9uKHByb2plY3RMaXN0KSB7XG4gICAgICAgIGNvbnN0IHByb2plY3RTZWxlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvamVjdC1zZWxlY3Rpb24nKVxuICAgICAgICBjb25zb2xlLmxvZyhwcm9qZWN0U2VsZWN0aW9uKVxuICAgICAgICBmb3IoY29uc3QgcHJvamVjdCBvZiBwcm9qZWN0TGlzdCl7XG4gICAgICAgICAgICBpZihkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwcm9qZWN0KSA9PT0gbnVsbCl7XG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0Q2hvaWNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgICAgICAgICBwcm9qZWN0Q2hvaWNlLnZhbHVlID0gcHJvamVjdDtcbiAgICAgICAgICAgIHByb2plY3RDaG9pY2UudGV4dENvbnRlbnQgPSBwcm9qZWN0O1xuICAgICAgICAgICAgcHJvamVjdENob2ljZS5pZCA9IHByb2plY3Q7XG4gICAgICAgICAgICBwcm9qZWN0U2VsZWN0aW9uLmFwcGVuZChwcm9qZWN0Q2hvaWNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2V0Q3VycmVudERhdGUoKSB7XG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICBjb25zdCBkYXkgPSBkYXRlLmdldERhdGUoKTtcbiAgICBsZXQgbW9udGggPSBkYXRlLmdldE1vbnRoKCkgKyAxO1xuICAgIGlmIChtb250aC50b1N0cmluZy5sZW5ndGggPCAyKSBtb250aCA9ICcwJyArIG1vbnRoO1xuICAgIHJldHVybiB7IHllYXIsIG1vbnRoLCBkYXkgfVxufSIsImltcG9ydCB7IGZvcm1hdFRpbWUgfSBmcm9tIFwiLi9sb2FkaG9tZVwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcm9qZWN0c1BhZ2Uge1xuICAgIGNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY29udGVudCcpO1xuICAgIG1haW5Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFpbi1jb250ZW50LWNvbnRhaW5lcicpO1xuICAgIHRvZG9zQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvZG9zLWNvbnRhaW5lcicpO1xuICAgIHByb2plY3RUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gxJyk7XG4gICAgcHJvamVjdHNMaXN0ID0gW107XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucHJvamVjdHMgPSBbXTtcbiAgICB9XG5cbiAgICBsb2FkVGl0bGUoKSB7XG4gICAgICAgIHRoaXMucHJvamVjdFRpdGxlLmNsYXNzTGlzdC5hZGQoJ3Byb2plY3QtdGl0bGUnKTtcbiAgICAgICAgdGhpcy5wcm9qZWN0VGl0bGUudGV4dENvbnRlbnQgPSAnUHJvamVjdHMnO1xuICAgICAgICB0aGlzLm1haW5Db250YWluZXIuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdhZnRlcmJlZ2luJywgdGhpcy5wcm9qZWN0VGl0bGUpO1xuICAgIH1cblxuICAgIGxvYWRQcm9qZWN0Q29udGFpbmVycygpIHtcbiAgICAgICAgZm9yIChjb25zdCBwcm9qZWN0IG9mIHRoaXMucHJvamVjdHNMaXN0KSB7XG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0VGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMicpO1xuICAgICAgICAgICAgcHJvamVjdENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0LWNvbnRhaW5lcicpO1xuICAgICAgICAgICAgcHJvamVjdENvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ2RhdGEtcHJvamVjdC1uYW1lJywgcHJvamVjdClcbiAgICAgICAgICAgIHByb2plY3RUaXRsZS50ZXh0Q29udGVudCA9IHByb2plY3Q7XG4gICAgICAgICAgICBwcm9qZWN0Q29udGFpbmVyLmFwcGVuZChwcm9qZWN0VGl0bGUpO1xuICAgICAgICAgICAgdGhpcy50b2Rvc0NvbnRhaW5lci5hcHBlbmQocHJvamVjdENvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBsb2FkVG9kb3NGb3JQcm9qZWN0KGFycikge1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIGZvciAoY29uc3QgdG9kbyBvZiBhcnIpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvZG9Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIHRvZG9Db250YWluZXIuY2xhc3NMaXN0LmFkZCgndG9kby1jb250YWluZXInKTtcbiAgICAgICAgICAgIHRvZG9Db250YWluZXIuc2V0QXR0cmlidXRlKCdkYXRhLXRvZG8taW5kZXgnLCBpKTtcbiAgICAgICAgICAgIGlmICh0b2RvLmNvbXBsZXRlID09PSB0cnVlKSB0b2RvQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2NvbXBsZXRlZCcpO1xuICAgICAgICAgICAgaSsrXG4gICAgICAgICAgICAvL3RpdGxlXG4gICAgICAgICAgICBjb25zdCB0b2RvVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMicpO1xuICAgICAgICAgICAgdG9kb1RpdGxlLmNsYXNzTGlzdC5hZGQoJ3RvZG8tdGl0bGUnKTtcbiAgICAgICAgICAgIHRvZG9UaXRsZS50ZXh0Q29udGVudCA9IHRvZG8udGl0bGU7XG5cbiAgICAgICAgICAgIC8vZGVzY3JpcHRpb25cbiAgICAgICAgICAgIGNvbnN0IHRvZG9EZXNjcmlwdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgICAgICAgIHRvZG9EZXNjcmlwdGlvbi5jbGFzc0xpc3QuYWRkKCd0b2RvLWRlc2NyaXB0aW9uJyk7XG4gICAgICAgICAgICB0b2RvRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSB0b2RvLmRlc2NyaXB0aW9uO1xuXG4gICAgICAgICAgICAvL2RhdGVcbiAgICAgICAgICAgIGNvbnN0IHRvZG9EYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgICAgICAgdG9kb0RhdGUuY2xhc3NMaXN0LmFkZCgndG9kby1kYXRlJyk7XG4gICAgICAgICAgICB0b2RvRGF0ZS5pbm5lckhUTUwgPSBgPHNwYW4gY2xhc3M9XCJkdWUtZGF0ZS1sYWJlbFwiPkR1ZSBEYXRlOiA8L3NwYW4+ICR7dG9kby5kdWVEYXRlLnNsaWNlKDUsIDcpfS8ke3RvZG8uZHVlRGF0ZS5zbGljZSg4LCAxMSl9LyR7dG9kby5kdWVEYXRlLnNsaWNlKDAsIDQpfWA7XG5cbiAgICAgICAgICAgIC8vdGltZVxuICAgICAgICAgICAgY29uc3QgdG9kb1RpbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgICAgICAgICB0b2RvVGltZS5jbGFzc0xpc3QuYWRkKCd0b2RvLXRpbWUnKTtcbiAgICAgICAgICAgIGlmICh0b2RvLnRpbWUgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgdG9kb1RpbWUuaW5uZXJIVE1MID0gYDxzcGFuIGNsYXNzPVwiZHVlLXRpbWUtbGFiZWxcIj5UaW1lIER1ZTogPC9zcGFuPiR7Zm9ybWF0VGltZSh0b2RvLnRpbWUpfWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0b2RvVGltZS5pbm5lckhUTUwgPSBgPHNwYW4gY2xhc3M9XCJkdWUtdGltZS1sYWJlbFwiPlRpbWUgRHVlOiA8L3NwYW4+IE5vIFRpbWUgU2V0YDtcbiAgICAgICAgICAgIH1cblxuXG5cblxuICAgICAgICAgICAgLy9jb21wbGV0aW9uIGJ1dHRvblxuICAgICAgICAgICAgY29uc3QgY29tcGxldGVkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgICAgICBjb21wbGV0ZWQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpXG4gICAgICAgICAgICBjb21wbGV0ZWQuY2xhc3NMaXN0LmFkZCgnY29tcGxldGUtYnV0dG9uJyk7XG4gICAgICAgICAgICBpZiAodG9kby5jb21wbGV0ZSA9PT0gdHJ1ZSkgY29tcGxldGVkLmNsYXNzTGlzdC5hZGQoJ2NvbXBsZXRlZCcpO1xuICAgICAgICAgICAgKHRvZG8uY29tcGxldGUgPT09IGZhbHNlKSA/IGNvbXBsZXRlZC50ZXh0Q29udGVudCA9ICdOb3QgQ29tcGxldGVkJyA6IGNvbXBsZXRlZC50ZXh0Q29udGVudCA9ICdDb21wbGV0ZWQnO1xuXG4gICAgICAgICAgICAvL29wdGlvbnMgbWVudVxuICAgICAgICAgICAgY29uc3Qgb3B0aW9uc01lbnVDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIG9wdGlvbnNNZW51Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3RvZG8tb3B0aW9ucycpO1xuICAgICAgICAgICAgb3B0aW9uc01lbnVDb250YWluZXIuaW5uZXJIVE1MID0gJzxzcGFuIGNsYXNzPVwibWF0ZXJpYWwtc3ltYm9scy1vdXRsaW5lZCB0b2RvLW9wdGlvbnMtaWNvblwiPm1vcmVfdmVydDwvc3Bhbj4nO1xuXG4gICAgICAgICAgICAvL29wdGlvbnNcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnNDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIGNvbnN0IHJlbW92ZVRvZG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIHJlbW92ZVRvZG8udGV4dENvbnRlbnQgPSAnUmVtb3ZlJztcbiAgICAgICAgICAgIHJlbW92ZVRvZG8uY2xhc3NMaXN0LmFkZCgncmVtb3ZlLXRvZG8nKTtcbiAgICAgICAgICAgIG9wdGlvbnNDb250YWluZXIuY2xhc3NMaXN0LmFkZCgndG9kby1vcHRpb25zLWNvbnRhaW5lcicsICdoaWRkZW4nKTtcbiAgICAgICAgICAgIG9wdGlvbnNDb250YWluZXIuYXBwZW5kKHJlbW92ZVRvZG8pO1xuXG5cblxuICAgICAgICAgICAgb3B0aW9uc01lbnVDb250YWluZXIuYXBwZW5kKG9wdGlvbnNDb250YWluZXIpO1xuICAgICAgICAgICAgdG9kb0NvbnRhaW5lci5hcHBlbmQodG9kb1RpdGxlLCB0b2RvRGVzY3JpcHRpb24sIHRvZG9EYXRlLCB0b2RvVGltZSwgY29tcGxldGVkLCBvcHRpb25zTWVudUNvbnRhaW5lcik7XG4gICAgICAgICAgICB0aGlzLmFkZFRvZG9zVG9Qcm9qZWN0Q29udGFpbmVycyh0b2RvLnByb2plY3ROYW1lLCB0b2RvQ29udGFpbmVyKTtcblxuICAgICAgICB9XG4gICAgfVxuXG4gICAgYWRkVG9kb3NUb1Byb2plY3RDb250YWluZXJzKHByb2plY3ROYW1lLCB0b2RvQ29udGFpbmVyKSB7XG4gICAgICAgIGNvbnN0IHByb2plY3RDb250YWluZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnByb2plY3QtY29udGFpbmVyJyk7XG4gICAgICAgIGZvciAoY29uc3QgY29udGFpbmVyIG9mIHByb2plY3RDb250YWluZXJzKXtcbiAgICAgICAgICAgICAgICBpZiAocHJvamVjdE5hbWUgPT09IGNvbnRhaW5lci5nZXRBdHRyaWJ1dGUoJ2RhdGEtcHJvamVjdC1uYW1lJykpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZCh0b2RvQ29udGFpbmVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgfVxuXG59XG5cblxuIl0sIm5hbWVzIjpbIk1haW5Db250ZW50IiwiY29udGVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIm1haW5Db250ZW50Q29udGFpbmVyIiwidG9kb3Njb250YWluZXIiLCJjb25zdHJ1Y3RvciIsImxvYWRUb2RvcyIsImFyciIsImkiLCJ0aGlzIiwiaW5uZXJIVE1MIiwidG9kbyIsInRvZG9Db250YWluZXIiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwic2V0QXR0cmlidXRlIiwiY29tcGxldGUiLCJ0b2RvVGl0bGUiLCJ0ZXh0Q29udGVudCIsInRpdGxlIiwidG9kb0Rlc2NyaXB0aW9uIiwiZGVzY3JpcHRpb24iLCJ0b2RvRGF0ZSIsImR1ZURhdGUiLCJzbGljZSIsInRvZG9UaW1lIiwidGltZSIsImZvcm1hdFRpbWUiLCJwcm9qZWN0cyIsInByb2plY3ROYW1lIiwiY29tcGxldGVkIiwib3B0aW9uc01lbnVDb250YWluZXIiLCJvcHRpb25zQ29udGFpbmVyIiwicmVtb3ZlVG9kbyIsImFwcGVuZCIsImFkZENvbXBsZXRpb25CdXR0b25FdmVudCIsImNvbXBsZXRpb25CdXR0b24iLCJxdWVyeVNlbGVjdG9yQWxsIiwiYnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJjb250YWlucyIsInJlbW92ZSIsInRhcmdldCIsInBhcmVudE5vZGUiLCJnZXRBdHRyaWJ1dGUiLCJzaG93VG9kb09wdGlvbnMiLCJ0b2RvT3B0aW9uQnV0dG9uIiwiY29uc29sZSIsImxvZyIsIm9wdGlvbnMiLCJUb0RvIiwibGFuZGluZ0xvYWRlciIsIm5hdiIsIm1haW5Db250ZW50IiwiZGltQmFja2dyb3VuZCIsInN0eWxlIiwiZmlsdGVyIiwidW5EaW1CYWNrZ3JvdW5kIiwicmVtb3ZlQXR0cmlidXRlIiwidG9kb21vZGFsIiwibW9kYWxDb250YWluZXIiLCJ0b2dnbGVNb2RhbFZpc2liaWxpdHkiLCJ0b2dnbGUiLCJvcGVuTW9kYWwiLCJwcm9qZWN0TGlzdCIsInN0b3BQcm9wYWdhdGlvbiIsInVwZGF0ZVByb2plY3RzU2VsZWN0aW9uIiwiY2xvc2VNb2RhbCIsInJldmlld05vZGUiLCJleGl0Rm9ybSIsIm5vZGVOYW1lIiwibG9hZE1vZGFsQ29udGVudCIsInRhc2tEYXRlIiwiY3VycmVudERhdGUiLCJkYXRlIiwiRGF0ZSIsInllYXIiLCJnZXRGdWxsWWVhciIsImRheSIsImdldERhdGUiLCJtb250aCIsImdldE1vbnRoIiwidG9TdHJpbmciLCJsZW5ndGgiLCJnZXRDdXJyZW50RGF0ZSIsImNsZWFyTW9kYWxDb250ZW50IiwidmFsdWUiLCJwcm9qZWN0U2VsZWN0aW9uIiwicHJvamVjdCIsImdldEVsZW1lbnRCeUlkIiwicHJvamVjdENob2ljZSIsImlkIiwibWFpbkNvbnRhaW5lciIsInRvZG9zQ29udGFpbmVyIiwicHJvamVjdFRpdGxlIiwicHJvamVjdHNMaXN0IiwibG9hZFRpdGxlIiwiaW5zZXJ0QWRqYWNlbnRFbGVtZW50IiwibG9hZFByb2plY3RDb250YWluZXJzIiwicHJvamVjdENvbnRhaW5lciIsImxvYWRUb2Rvc0ZvclByb2plY3QiLCJhZGRUb2Rvc1RvUHJvamVjdENvbnRhaW5lcnMiLCJwcm9qZWN0Q29udGFpbmVycyIsImNvbnRhaW5lciIsInRvZG9zTGlzdCIsIm5ld1RvZG9CdXR0b24iLCJzdWJtaXRUb2RvQnV0dG9uIiwicHJvamVjdHNCdXR0b24iLCJob21lQnV0dG9uIiwicmVzZXROZXdUb2RvUHJvamVjdFNlbGVjdGlvbiIsInByb2plY3ROYW1lQ29udGFpbmVyIiwiYWRkUmVtb3ZlVG9kb0xpc3RlbmVyIiwicmVtb3ZlQnV0dG9ucyIsInRvZG9pbmRleCIsInNwbGljZSIsInJlbG9hZFByb2plY3RUb2RvcyIsInByb2plY3RUb2RvcyIsImEiLCJjaGlsZEVsZW1lbnRDb3VudCIsIndpbmRvdyIsImNoZWNrVmFsaWRpdHkiLCJwcmV2ZW50RGVmYXVsdCIsInB1c2giLCJpbmNsdWRlcyIsInJlcG9ydFZhbGlkaXR5Il0sInNvdXJjZVJvb3QiOiIifQ==