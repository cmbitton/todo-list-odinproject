(()=>{"use strict";class t{content=document.querySelector("#content");mainContentContainer=document.querySelector(".main-content-container");todoscontainer=document.querySelector(".todos-container");constructor(){}loadTodos(t){let e=0;this.todoscontainer.innerHTML="";for(const n of t){const t=document.createElement("div");t.classList.add("todo-container"),t.setAttribute("data-todo-index",e),!0===n.complete&&t.classList.add("completed"),e++;const c=document.createElement("h2");c.classList.add("todo-title"),c.textContent=n.title;const s=document.createElement("p");s.classList.add("todo-description"),s.textContent=n.description;const a=document.createElement("p");a.classList.add("todo-date"),a.innerHTML=`<span class="due-date-label">Due Date: </span> ${n.dueDate.slice(5,7)}/${n.dueDate.slice(8,11)}/${n.dueDate.slice(0,4)}`;const d=document.createElement("p");d.classList.add("todo-time"),""!==n.time?d.innerHTML='<span class="due-time-label">Time Due: </span>'+(0==+(o=n.time).slice(0,2)?`${+o.slice(0,2)+12}:${o.slice(3,5)} AM`:+o.slice(0,2)<12?o+" AM":12==+o.slice(0,2)?`${o.slice(0,2)}:${o.slice(3,5)} PM`:`${+o.slice(0,2)-12}:${o.slice(3,5)} PM`):d.innerHTML='<span class="due-time-label">Time Due: </span> No Time Set';const i=document.createElement("button");i.setAttribute("type","button"),i.classList.add("complete-button"),!0===n.complete&&i.classList.add("completed"),!1===n.complete?i.textContent="Not Completed":i.textContent="Completed";const l=document.createElement("div");l.classList.add("todo-options"),l.innerHTML='<span class="material-symbols-outlined">more_vert</span>',t.append(c,s,a,d,i,l),this.todoscontainer.append(t)}var o;this.addCompletionButtonEvent(t)}addCompletionButtonEvent(t){const e=document.querySelectorAll(".complete-button");for(const o of e)o.addEventListener("click",(e=>{o.classList.contains("completed")?(o.classList.remove("completed"),o.textContent="Not Completed",e.target.parentNode.classList.remove("completed"),t[e.target.parentNode.getAttribute("data-todo-index")].complete=!1):(o.classList.add("completed"),e.target.parentNode.classList.add("completed"),o.textContent="Completed",t[e.target.parentNode.getAttribute("data-todo-index")].complete=!0)}))}}class e{constructor(t,e,o,n,c){this.title=t,this.description=e,this.dueDate=o,this.time=n,this.complete=c,this.todosList=[]}}const o=new class{content=document.querySelector("#content");nav=document.querySelector(".navbar");constructor(){this.mainContent=new t}dimBackground(){this.nav.style.filter="brightness(50%)",this.mainContent.mainContentContainer.style.filter="brightness(50%)"}unDimBackground(){this.nav.removeAttribute("style"),this.mainContent.mainContentContainer.removeAttribute("style")}},n=new class{content=document.querySelector("#content");modalContainer=document.querySelector(".new-todo-container");constructor(){}toggleModalVisibility(){this.modalContainer.classList.toggle("hidden")}openModal(t){t.stopPropagation(),this.toggleModalVisibility()}closeModal(t){let e=t.target,o=!0;if(!t.target.classList.contains("submit-todo-button"))for(;e&&"BODY"!==e.nodeName;){if(e.classList.contains("new-todo-container")){o=!1;break}e=e.parentNode}return o&&!this.modalContainer.classList.contains("hidden")&&this.modalContainer.classList.toggle("hidden"),o}loadModalContent(){const t=document.querySelector("#tododate"),e=function(){const t=new Date,e=t.getFullYear(),o=t.getDate();let n=t.getMonth()+1;return n.toString.length<2&&(n="0"+n),{year:e,month:n,day:o}}();t.setAttribute({min:`${e.year}-${e.month}-${e.day}`,required:!0})}clearModalContent(){document.querySelector("#todoname").value="",document.querySelector("#tododescription").value="",document.querySelector("#tododate").value="",document.querySelector("#todotime").value=""}},c=[],s=document.querySelector(".new-todo-container"),a=document.querySelector(".add-todo-button"),d=document.querySelector(".submit-todo-button");a.addEventListener("click",(t=>{s.classList.contains("hidden")&&(n.openModal(t),n.clearModalContent(),o.dimBackground())})),window.addEventListener("click",(t=>{n.closeModal(t)&&o.unDimBackground()})),d.addEventListener("click",(t=>{if(document.querySelector("form").checkValidity()){t.preventDefault();const s=document.querySelector("#todoname").value,a=document.querySelector("#tododescription").value,d=document.querySelector("#tododate").value,i=document.querySelector("#todotime").value,l=new e(s,a,d,i,!1);c.push(l),console.log(c),o.mainContent.loadTodos(c),n.closeModal(t),o.dimBackground()}else document.querySelector("form").reportValidity(),t.stopPropagation()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LGFBQWEyRSxNQUNoRHhELEVBQWtCcEIsU0FBU0MsY0FBYyxvQkFBb0IyRSxNQUM3RHRELEVBQVd0QixTQUFTQyxjQUFjLGFBQWEyRSxNQUMvQ25ELEVBQVd6QixTQUFTQyxjQUFjLGFBQWEyRSxNQUMvQ2xFLEVBQU8sSUFBSStCLEVBQUt4QixFQUFXRyxFQUFpQkUsRUFBVUcsR0FBVSxHQUN0RWlCLEVBQVV3QyxLQUFLeEUsR0FDZnlFLFFBQVFDLElBQUkxQyxHQUNaQyxFQUFjRSxZQUFZeEMsVUFBVXFDLEdBQ3BDUyxFQUFVTSxXQUFXdEIsR0FDckJRLEVBQWNHLGVBQ2xCLE1BZkk5QyxTQUFTQyxjQUFjLFFBQVFvRixpQkFDL0JsRCxFQUFFcUIsaUJBY04sRyIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG8tbGlzdC1vZGlucHJvamVjdC8uL3NyYy9sb2FkaG9tZS5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3Qtb2RpbnByb2plY3QvLi9zcmMvdGFza3MuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0LW9kaW5wcm9qZWN0Ly4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC1vZGlucHJvamVjdC8uL3NyYy90b2RvbW9kYWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGFuZGluZ1BhZ2Uge1xuICAgIGNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY29udGVudCcpO1xuICAgIG5hdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXZiYXInKTtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5tYWluQ29udGVudCA9IG5ldyBNYWluQ29udGVudDtcbiAgICB9XG5cbiAgICBkaW1CYWNrZ3JvdW5kKCkge1xuICAgICAgICB0aGlzLm5hdi5zdHlsZS5maWx0ZXIgPSAnYnJpZ2h0bmVzcyg1MCUpJztcbiAgICAgICAgdGhpcy5tYWluQ29udGVudC5tYWluQ29udGVudENvbnRhaW5lci5zdHlsZS5maWx0ZXIgPSAnYnJpZ2h0bmVzcyg1MCUpJztcbiAgICB9XG5cbiAgICB1bkRpbUJhY2tncm91bmQoKSB7XG4gICAgICAgIHRoaXMubmF2LnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgICAgdGhpcy5tYWluQ29udGVudC5tYWluQ29udGVudENvbnRhaW5lci5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgfVxuXG59XG5cblxuY2xhc3MgTWFpbkNvbnRlbnQge1xuICAgIGNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY29udGVudCcpO1xuICAgIG1haW5Db250ZW50Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1haW4tY29udGVudC1jb250YWluZXInKTtcbiAgICB0b2Rvc2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b2Rvcy1jb250YWluZXInKTtcbiAgICBjb25zdHJ1Y3RvcigpIHtcblxuICAgIH1cblxuXG4gICAgbG9hZFRvZG9zKGFycikge1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIHRoaXMudG9kb3Njb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIGZvciAoY29uc3QgdG9kbyBvZiBhcnIpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvZG9Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIHRvZG9Db250YWluZXIuY2xhc3NMaXN0LmFkZCgndG9kby1jb250YWluZXInKTtcbiAgICAgICAgICAgIHRvZG9Db250YWluZXIuc2V0QXR0cmlidXRlKCdkYXRhLXRvZG8taW5kZXgnLCBpKTtcbiAgICAgICAgICAgIGlmKHRvZG8uY29tcGxldGUgPT09IHRydWUpIHRvZG9Db250YWluZXIuY2xhc3NMaXN0LmFkZCgnY29tcGxldGVkJyk7XG4gICAgICAgICAgICBpKytcbiAgICAgICAgICAgIC8vdGl0bGVcbiAgICAgICAgICAgIGNvbnN0IHRvZG9UaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gyJyk7XG4gICAgICAgICAgICB0b2RvVGl0bGUuY2xhc3NMaXN0LmFkZCgndG9kby10aXRsZScpO1xuICAgICAgICAgICAgdG9kb1RpdGxlLnRleHRDb250ZW50ID0gdG9kby50aXRsZTtcblxuICAgICAgICAgICAgLy9kZXNjcmlwdGlvblxuICAgICAgICAgICAgY29uc3QgdG9kb0Rlc2NyaXB0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgICAgICAgdG9kb0Rlc2NyaXB0aW9uLmNsYXNzTGlzdC5hZGQoJ3RvZG8tZGVzY3JpcHRpb24nKTtcbiAgICAgICAgICAgIHRvZG9EZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IHRvZG8uZGVzY3JpcHRpb247XG5cbiAgICAgICAgICAgIC8vZGF0ZVxuICAgICAgICAgICAgY29uc3QgdG9kb0RhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgICAgICAgICB0b2RvRGF0ZS5jbGFzc0xpc3QuYWRkKCd0b2RvLWRhdGUnKTtcbiAgICAgICAgICAgIHRvZG9EYXRlLmlubmVySFRNTCA9IGA8c3BhbiBjbGFzcz1cImR1ZS1kYXRlLWxhYmVsXCI+RHVlIERhdGU6IDwvc3Bhbj4gJHt0b2RvLmR1ZURhdGUuc2xpY2UoNSwgNyl9LyR7dG9kby5kdWVEYXRlLnNsaWNlKDgsIDExKX0vJHt0b2RvLmR1ZURhdGUuc2xpY2UoMCwgNCl9YDtcblxuICAgICAgICAgICAgLy90aW1lXG4gICAgICAgICAgICBjb25zdCB0b2RvVGltZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgICAgICAgIHRvZG9UaW1lLmNsYXNzTGlzdC5hZGQoJ3RvZG8tdGltZScpO1xuICAgICAgICAgICAgaWYodG9kby50aW1lICE9PSAnJyl7XG4gICAgICAgICAgICB0b2RvVGltZS5pbm5lckhUTUwgPSBgPHNwYW4gY2xhc3M9XCJkdWUtdGltZS1sYWJlbFwiPlRpbWUgRHVlOiA8L3NwYW4+JHtmb3JtYXRUaW1lKHRvZG8udGltZSl9YDtcbiAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0b2RvVGltZS5pbm5lckhUTUwgPSBgPHNwYW4gY2xhc3M9XCJkdWUtdGltZS1sYWJlbFwiPlRpbWUgRHVlOiA8L3NwYW4+IE5vIFRpbWUgU2V0YDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9jb21wbGV0aW9uIGJ1dHRvblxuICAgICAgICAgICAgY29uc3QgY29tcGxldGVkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgICAgICBjb21wbGV0ZWQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpXG4gICAgICAgICAgICBjb21wbGV0ZWQuY2xhc3NMaXN0LmFkZCgnY29tcGxldGUtYnV0dG9uJyk7XG4gICAgICAgICAgICBpZih0b2RvLmNvbXBsZXRlID09PSB0cnVlKSBjb21wbGV0ZWQuY2xhc3NMaXN0LmFkZCgnY29tcGxldGVkJyk7XG4gICAgICAgICAgICAodG9kby5jb21wbGV0ZSA9PT0gZmFsc2UpID8gY29tcGxldGVkLnRleHRDb250ZW50ID0gJ05vdCBDb21wbGV0ZWQnIDogY29tcGxldGVkLnRleHRDb250ZW50ID0gJ0NvbXBsZXRlZCc7XG5cbiAgICAgICAgICAgIC8vb3B0aW9ucyBtZW51XG4gICAgICAgICAgICBjb25zdCBvcHRpb25zQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBvcHRpb25zQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3RvZG8tb3B0aW9ucycpXG4gICAgICAgICAgICBvcHRpb25zQ29udGFpbmVyLmlubmVySFRNTCA9ICc8c3BhbiBjbGFzcz1cIm1hdGVyaWFsLXN5bWJvbHMtb3V0bGluZWRcIj5tb3JlX3ZlcnQ8L3NwYW4+JztcblxuXG4gICAgICAgICAgICB0b2RvQ29udGFpbmVyLmFwcGVuZCh0b2RvVGl0bGUsIHRvZG9EZXNjcmlwdGlvbiwgdG9kb0RhdGUsIHRvZG9UaW1lLCBjb21wbGV0ZWQsIG9wdGlvbnNDb250YWluZXIpO1xuICAgICAgICAgICAgdGhpcy50b2Rvc2NvbnRhaW5lci5hcHBlbmQodG9kb0NvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hZGRDb21wbGV0aW9uQnV0dG9uRXZlbnQoYXJyKTtcbiAgICB9XG5cbiAgICBhZGRDb21wbGV0aW9uQnV0dG9uRXZlbnQoYXJyKSB7XG4gICAgICAgIGNvbnN0IGNvbXBsZXRpb25CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY29tcGxldGUtYnV0dG9uJyk7XG4gICAgICAgIGZvciAoY29uc3QgYnV0dG9uIG9mIGNvbXBsZXRpb25CdXR0b24pIHtcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ2NvbXBsZXRlZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdjb21wbGV0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gJ05vdCBDb21wbGV0ZWQnXG4gICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnBhcmVudE5vZGUuY2xhc3NMaXN0LnJlbW92ZSgnY29tcGxldGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIGFycltlLnRhcmdldC5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZSgnZGF0YS10b2RvLWluZGV4JyldLmNvbXBsZXRlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnY29tcGxldGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCgnY29tcGxldGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9ICdDb21wbGV0ZWQnO1xuICAgICAgICAgICAgICAgICAgICBhcnJbZS50YXJnZXQucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdG9kby1pbmRleCcpXS5jb21wbGV0ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGZvcm1hdFRpbWUodGltZSkge1xuICAgIGlmICgrdGltZS5zbGljZSgwLCAyKSA9PT0gMCkgcmV0dXJuIChgJHsrdGltZS5zbGljZSgwLCAyKSArIDEyfToke3RpbWUuc2xpY2UoMywgNSl9IEFNYCk7XG4gICAgZWxzZSBpZiAoK3RpbWUuc2xpY2UoMCwgMikgPCAxMikgcmV0dXJuICh0aW1lICs9ICcgQU0nKTtcbiAgICBlbHNlIGlmICgrdGltZS5zbGljZSgwLCAyKSA9PT0gMTIpIHJldHVybiAoYCR7dGltZS5zbGljZSgwLCAyKX06JHt0aW1lLnNsaWNlKDMsIDUpfSBQTWApO1xuICAgIGVsc2UgcmV0dXJuIChgJHsrdGltZS5zbGljZSgwLCAyKSAtIDEyfToke3RpbWUuc2xpY2UoMywgNSl9IFBNYCk7XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVG9EbyB7XG4gICAgY29uc3RydWN0b3IgKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgdGltZSwgY29tcGxldGUpIHtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgICAgIHRoaXMuZHVlRGF0ZSA9IGR1ZURhdGU7XG4gICAgICAgIHRoaXMudGltZSA9IHRpbWU7XG4gICAgICAgIHRoaXMuY29tcGxldGUgPSBjb21wbGV0ZTtcbiAgICAgICAgdGhpcy50b2Rvc0xpc3QgPSAgW107XG4gICAgfVxufSIsImltcG9ydCB7IGRlZmF1bHQgYXMgTGFuZGluZ1BhZ2UgfSBmcm9tIFwiLi9sb2FkaG9tZS5qc1wiO1xuaW1wb3J0IFRvRG8gZnJvbSBcIi4vdGFza3MuanNcIjtcbmltcG9ydCBUb0RvTW9kYWwgZnJvbSBcIi4vdG9kb21vZGFsLmpzXCI7XG5cbmNvbnN0IGxhbmRpbmdMb2FkZXIgPSBuZXcgTGFuZGluZ1BhZ2UoKTtcbmNvbnN0IHRvZG9tb2RhbCA9IG5ldyBUb0RvTW9kYWwoKTtcbmNvbnN0IHRvZG9zTGlzdCA9IFtdO1xuY29uc3QgbW9kYWxDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmV3LXRvZG8tY29udGFpbmVyJyk7XG5jb25zdCBuZXdUb2RvQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC10b2RvLWJ1dHRvbicpO1xuY29uc3Qgc3VibWl0VG9kb0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdWJtaXQtdG9kby1idXR0b24nKTtcblxuLy9vcGVucyB0aGUgYWRkIG5ldyB0b2RvIG1vZGFsXG5uZXdUb2RvQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICBpZiAobW9kYWxDb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKSkge1xuICAgICAgICB0b2RvbW9kYWwub3Blbk1vZGFsKGUpO1xuICAgICAgICB0b2RvbW9kYWwuY2xlYXJNb2RhbENvbnRlbnQoKTtcbiAgICAgICAgbGFuZGluZ0xvYWRlci5kaW1CYWNrZ3JvdW5kKCk7XG5cbiAgICB9XG59KTtcblxuXG4vL2Nsb3NlcyBhZGQgbmV3IHRvZG8gbW9kYWxcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgY29uc3QgY2xvc2VkID0gdG9kb21vZGFsLmNsb3NlTW9kYWwoZSk7XG4gICAgaWYgKGNsb3NlZCkgbGFuZGluZ0xvYWRlci51bkRpbUJhY2tncm91bmQoKTtcblxufSlcblxuXG5cblxuXG5cbnN1Ym1pdFRvZG9CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGxldCBpc0Zvcm1WYWxpZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKS5jaGVja1ZhbGlkaXR5KCk7XG4gICAgaWYoIWlzRm9ybVZhbGlkKSB7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKS5yZXBvcnRWYWxpZGl0eSgpO1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cbiAgICBlbHNleyBcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGNvbnN0IHRvZG9UaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0b2RvbmFtZScpLnZhbHVlO1xuICAgICAgICBjb25zdCB0b2RvRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG9kb2Rlc2NyaXB0aW9uJykudmFsdWU7XG4gICAgICAgIGNvbnN0IHRvZG9EYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RvZG9kYXRlJykudmFsdWU7XG4gICAgICAgIGNvbnN0IHRvZG9UaW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RvZG90aW1lJykudmFsdWU7XG4gICAgICAgIGNvbnN0IHRvZG8gPSBuZXcgVG9Ebyh0b2RvVGl0bGUsIHRvZG9EZXNjcmlwdGlvbiwgdG9kb0RhdGUsIHRvZG9UaW1lLCBmYWxzZSk7XG4gICAgICAgIHRvZG9zTGlzdC5wdXNoKHRvZG8pO1xuICAgICAgICBjb25zb2xlLmxvZyh0b2Rvc0xpc3QpXG4gICAgICAgIGxhbmRpbmdMb2FkZXIubWFpbkNvbnRlbnQubG9hZFRvZG9zKHRvZG9zTGlzdCk7XG4gICAgICAgIHRvZG9tb2RhbC5jbG9zZU1vZGFsKGUpO1xuICAgICAgICBsYW5kaW5nTG9hZGVyLmRpbUJhY2tncm91bmQoKTtcbiAgICB9XG4gICAgfSlcblxuXG5cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFRvRG9Nb2RhbCB7XG4gICAgY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjb250ZW50Jyk7XG4gICAgbW9kYWxDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmV3LXRvZG8tY29udGFpbmVyJyk7XG4gICAgY29uc3RydWN0b3IoKSB7XG5cbiAgICB9XG5cbiAgICB0b2dnbGVNb2RhbFZpc2liaWxpdHkoKSB7XG4gICAgICAgIHRoaXMubW9kYWxDb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJyk7XG4gICAgfVxuXG4gICAgb3Blbk1vZGFsKGUpIHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgdGhpcy50b2dnbGVNb2RhbFZpc2liaWxpdHkoKTtcbiAgICB9XG5cbiAgICBjbG9zZU1vZGFsKGUpIHtcbiAgICAgICAgbGV0IHJldmlld05vZGUgPSBlLnRhcmdldDtcbiAgICAgICAgbGV0IGV4aXRGb3JtID0gdHJ1ZTtcbiAgICAgICAgaWYgKCFlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3N1Ym1pdC10b2RvLWJ1dHRvbicpKSB7XG4gICAgICAgICAgICB3aGlsZSAocmV2aWV3Tm9kZSAmJiByZXZpZXdOb2RlLm5vZGVOYW1lICE9PSAnQk9EWScpIHtcbiAgICAgICAgICAgICAgICBpZiAocmV2aWV3Tm9kZS5jbGFzc0xpc3QuY29udGFpbnMoJ25ldy10b2RvLWNvbnRhaW5lcicpKSB7XG4gICAgICAgICAgICAgICAgICAgIGV4aXRGb3JtID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXZpZXdOb2RlID0gcmV2aWV3Tm9kZS5wYXJlbnROb2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChleGl0Rm9ybSAmJiAhdGhpcy5tb2RhbENvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGRlbicpKSB7XG4gICAgICAgICAgICB0aGlzLm1vZGFsQ29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV4aXRGb3JtO1xuICAgIH1cblxuICAgIGxvYWRNb2RhbENvbnRlbnQoKSB7XG4gICAgICAgIC8vZGF0ZVxuICAgICAgICBjb25zdCB0YXNrRGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0b2RvZGF0ZScpO1xuICAgICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IGdldEN1cnJlbnREYXRlKCk7XG4gICAgICAgIHRhc2tEYXRlLnNldEF0dHJpYnV0ZSh7J21pbic6IGAke2N1cnJlbnREYXRlLnllYXJ9LSR7Y3VycmVudERhdGUubW9udGh9LSR7Y3VycmVudERhdGUuZGF5fWAsICdyZXF1aXJlZCc6IHRydWV9KVxuXG4gICAgfVxuXG4gICAgY2xlYXJNb2RhbENvbnRlbnQoKSB7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0b2RvbmFtZScpLnZhbHVlID0gJyc7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0b2RvZGVzY3JpcHRpb24nKS52YWx1ZSA9ICcnO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG9kb2RhdGUnKS52YWx1ZSA9ICcnO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG9kb3RpbWUnKS52YWx1ZSA9ICcnO1xuXG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXRDdXJyZW50RGF0ZSgpIHtcbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgIGNvbnN0IGRheSA9IGRhdGUuZ2V0RGF0ZSgpO1xuICAgIGxldCBtb250aCA9IGRhdGUuZ2V0TW9udGgoKSArIDE7XG4gICAgaWYgKG1vbnRoLnRvU3RyaW5nLmxlbmd0aCA8IDIpIG1vbnRoID0gJzAnICsgbW9udGg7XG4gICAgcmV0dXJuIHsgeWVhciwgbW9udGgsIGRheSB9XG59Il0sIm5hbWVzIjpbIk1haW5Db250ZW50IiwiY29udGVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIm1haW5Db250ZW50Q29udGFpbmVyIiwidG9kb3Njb250YWluZXIiLCJjb25zdHJ1Y3RvciIsImxvYWRUb2RvcyIsImFyciIsImkiLCJ0aGlzIiwiaW5uZXJIVE1MIiwidG9kbyIsInRvZG9Db250YWluZXIiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwic2V0QXR0cmlidXRlIiwiY29tcGxldGUiLCJ0b2RvVGl0bGUiLCJ0ZXh0Q29udGVudCIsInRpdGxlIiwidG9kb0Rlc2NyaXB0aW9uIiwiZGVzY3JpcHRpb24iLCJ0b2RvRGF0ZSIsImR1ZURhdGUiLCJzbGljZSIsInRvZG9UaW1lIiwidGltZSIsImNvbXBsZXRlZCIsIm9wdGlvbnNDb250YWluZXIiLCJhcHBlbmQiLCJhZGRDb21wbGV0aW9uQnV0dG9uRXZlbnQiLCJjb21wbGV0aW9uQnV0dG9uIiwicXVlcnlTZWxlY3RvckFsbCIsImJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiY29udGFpbnMiLCJyZW1vdmUiLCJ0YXJnZXQiLCJwYXJlbnROb2RlIiwiZ2V0QXR0cmlidXRlIiwiVG9EbyIsInRvZG9zTGlzdCIsImxhbmRpbmdMb2FkZXIiLCJuYXYiLCJtYWluQ29udGVudCIsImRpbUJhY2tncm91bmQiLCJzdHlsZSIsImZpbHRlciIsInVuRGltQmFja2dyb3VuZCIsInJlbW92ZUF0dHJpYnV0ZSIsInRvZG9tb2RhbCIsIm1vZGFsQ29udGFpbmVyIiwidG9nZ2xlTW9kYWxWaXNpYmlsaXR5IiwidG9nZ2xlIiwib3Blbk1vZGFsIiwic3RvcFByb3BhZ2F0aW9uIiwiY2xvc2VNb2RhbCIsInJldmlld05vZGUiLCJleGl0Rm9ybSIsIm5vZGVOYW1lIiwibG9hZE1vZGFsQ29udGVudCIsInRhc2tEYXRlIiwiY3VycmVudERhdGUiLCJkYXRlIiwiRGF0ZSIsInllYXIiLCJnZXRGdWxsWWVhciIsImRheSIsImdldERhdGUiLCJtb250aCIsImdldE1vbnRoIiwidG9TdHJpbmciLCJsZW5ndGgiLCJnZXRDdXJyZW50RGF0ZSIsImNsZWFyTW9kYWxDb250ZW50IiwidmFsdWUiLCJuZXdUb2RvQnV0dG9uIiwic3VibWl0VG9kb0J1dHRvbiIsIndpbmRvdyIsImNoZWNrVmFsaWRpdHkiLCJwcmV2ZW50RGVmYXVsdCIsInB1c2giLCJjb25zb2xlIiwibG9nIiwicmVwb3J0VmFsaWRpdHkiXSwic291cmNlUm9vdCI6IiJ9