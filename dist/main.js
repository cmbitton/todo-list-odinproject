(()=>{"use strict";class t{content=document.querySelector("#content");mainContentContainer=document.querySelector(".main-content-container");todoscontainer=document.querySelector(".todos-container");constructor(){}loadTodos(t){let e=0;this.todoscontainer.innerHTML="";for(const n of t){const t=document.createElement("div");t.classList.add("todo-container"),t.setAttribute("data-todo-index",e),!0===n.complete&&t.classList.add("completed"),e++;const s=document.createElement("h2");s.classList.add("todo-title"),s.textContent=n.title;const c=document.createElement("p");c.classList.add("todo-description"),c.textContent=n.description;const i=document.createElement("p");i.classList.add("todo-date"),i.innerHTML=`<span class="due-date-label">Due Date: </span> ${n.dueDate.slice(5,7)}/${n.dueDate.slice(8,11)}/${n.dueDate.slice(0,4)}`;const d=document.createElement("p");d.classList.add("todo-time"),d.innerHTML='<span class="due-time-label">Time Due: </span>'+(0==+(o=n.time).slice(0,2)?`${+o.slice(0,2)+12}:${o.slice(3,5)} AM`:+o.slice(0,2)<12?o+" AM":12==+o.slice(0,2)?`${o.slice(0,2)}:${o.slice(3,5)} PM`:`${+o.slice(0,2)-12}:${o.slice(3,5)} PM`);const a=document.createElement("button");a.setAttribute("type","button"),a.classList.add("complete-button"),!0===n.complete&&a.classList.add("completed"),!1===n.complete?a.textContent="Not Completed":a.textContent="Completed",t.append(s,c,i,d,a),this.todoscontainer.append(t)}var o;this.addCompletionButtonEvent(t)}addCompletionButtonEvent(t){const e=document.querySelectorAll(".complete-button");for(const o of e)o.addEventListener("click",(e=>{o.classList.contains("completed")?(o.classList.remove("completed"),o.textContent="Not Completed",e.target.parentNode.classList.remove("completed"),t[e.target.parentNode.getAttribute("data-todo-index")].complete=!1):(o.classList.add("completed"),e.target.parentNode.classList.add("completed"),o.textContent="Completed",t[e.target.parentNode.getAttribute("data-todo-index")].complete=!0)}))}}class e{constructor(t,e,o,n,s){this.title=t,this.description=e,this.dueDate=o,this.time=n,this.complete=s,this.todosList=[]}}const o=new class{content=document.querySelector("#content");nav=document.querySelector(".navbar");menu=document.querySelector(".menu");constructor(){this.mainContent=new t}dimBackground(){this.nav.style.filter="brightness(50%)",this.menu.style.filter="brightness(50%)",this.mainContent.mainContentContainer.style.filter="brightness(50%)"}unDimBackground(){this.nav.removeAttribute("style"),this.menu.removeAttribute("style"),this.mainContent.mainContentContainer.removeAttribute("style")}},n=new class{content=document.querySelector("#content");modalContainer=document.querySelector(".new-todo-container");constructor(){}toggleModalVisibility(){this.modalContainer.classList.toggle("hidden")}openModal(t){t.stopPropagation(),this.toggleModalVisibility()}closeModal(t){let e=t.target,o=!0;if(!t.target.classList.contains("submit-todo-button"))for(;e&&"BODY"!==e.nodeName;){if(e.classList.contains("new-todo-container")){o=!1;break}e=e.parentNode}return o&&!this.modalContainer.classList.contains("hidden")&&this.modalContainer.classList.toggle("hidden"),o}loadModalContent(){const t=document.querySelector("#tododate"),e=function(){const t=new Date,e=t.getFullYear(),o=t.getDate();let n=t.getMonth()+1;return n.toString.length<2&&(n="0"+n),{year:e,month:n,day:o}}();t.setAttribute({min:`${e.year}-${e.month}-${e.day}`,required:!0})}},s=[],c=document.querySelector(".new-todo-container"),i=document.querySelector(".add-todo-button"),d=document.querySelector(".submit-todo-button");i.addEventListener("click",(t=>{c.classList.contains("hidden")&&(n.openModal(t),o.dimBackground())})),window.addEventListener("click",(t=>{n.closeModal(t)&&o.unDimBackground()})),d.addEventListener("click",(t=>{if(document.querySelector("form").checkValidity()){t.preventDefault();const c=document.querySelector("#todoname").value,i=document.querySelector("#tododescription").value,d=document.querySelector("#tododate").value,a=document.querySelector("#todotime").value,l=new e(c,i,d,a,!1);s.push(l),console.log(s),o.mainContent.loadTodos(s),n.closeModal(t),o.dimBackground()}else document.querySelector("form").reportValidity(),t.stopPropagation()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFBUUMsSUFBSTFDLEdBQ1pDLEVBQWNHLFlBQVl4QyxVQUFVb0MsR0FDcENVLEVBQVVNLFdBQVd2QixHQUNyQlEsRUFBY0ksZUFDbEIsTUFmSTlDLFNBQVNDLGNBQWMsUUFBUW1GLGlCQUMvQmxELEVBQUVzQixpQkFjTixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9kby1saXN0LW9kaW5wcm9qZWN0Ly4vc3JjL2xvYWRob21lLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC1vZGlucHJvamVjdC8uL3NyYy90YXNrcy5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3Qtb2RpbnByb2plY3QvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0LW9kaW5wcm9qZWN0Ly4vc3JjL3RvZG9tb2RhbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBMYW5kaW5nUGFnZSB7XG4gICAgY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjb250ZW50Jyk7XG4gICAgbmF2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5hdmJhcicpO1xuICAgIG1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWVudScpO1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLm1haW5Db250ZW50ID0gbmV3IE1haW5Db250ZW50O1xuICAgIH1cblxuICAgIGRpbUJhY2tncm91bmQoKSB7XG4gICAgICAgIHRoaXMubmF2LnN0eWxlLmZpbHRlciA9ICdicmlnaHRuZXNzKDUwJSknO1xuICAgICAgICB0aGlzLm1lbnUuc3R5bGUuZmlsdGVyID0gJ2JyaWdodG5lc3MoNTAlKSc7XG4gICAgICAgIHRoaXMubWFpbkNvbnRlbnQubWFpbkNvbnRlbnRDb250YWluZXIuc3R5bGUuZmlsdGVyID0gJ2JyaWdodG5lc3MoNTAlKSc7XG4gICAgfVxuXG4gICAgdW5EaW1CYWNrZ3JvdW5kKCkge1xuICAgICAgICB0aGlzLm5hdi5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgIHRoaXMubWVudS5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgIHRoaXMubWFpbkNvbnRlbnQubWFpbkNvbnRlbnRDb250YWluZXIucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgIH1cblxufVxuXG5cbmNsYXNzIE1haW5Db250ZW50IHtcbiAgICBjb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NvbnRlbnQnKTtcbiAgICBtYWluQ29udGVudENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluLWNvbnRlbnQtY29udGFpbmVyJyk7XG4gICAgdG9kb3Njb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9kb3MtY29udGFpbmVyJyk7XG4gICAgY29uc3RydWN0b3IoKSB7XG5cbiAgICB9XG5cblxuICAgIGxvYWRUb2RvcyhhcnIpIHtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICB0aGlzLnRvZG9zY29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuICAgICAgICBmb3IgKGNvbnN0IHRvZG8gb2YgYXJyKSB7XG4gICAgICAgICAgICBjb25zdCB0b2RvQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICB0b2RvQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3RvZG8tY29udGFpbmVyJyk7XG4gICAgICAgICAgICB0b2RvQ29udGFpbmVyLnNldEF0dHJpYnV0ZSgnZGF0YS10b2RvLWluZGV4JywgaSk7XG4gICAgICAgICAgICBpZih0b2RvLmNvbXBsZXRlID09PSB0cnVlKSB0b2RvQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2NvbXBsZXRlZCcpO1xuICAgICAgICAgICAgaSsrXG4gICAgICAgICAgICAvL3RpdGxlXG4gICAgICAgICAgICBjb25zdCB0b2RvVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMicpO1xuICAgICAgICAgICAgdG9kb1RpdGxlLmNsYXNzTGlzdC5hZGQoJ3RvZG8tdGl0bGUnKTtcbiAgICAgICAgICAgIHRvZG9UaXRsZS50ZXh0Q29udGVudCA9IHRvZG8udGl0bGU7XG5cbiAgICAgICAgICAgIC8vZGVzY3JpcHRpb25cbiAgICAgICAgICAgIGNvbnN0IHRvZG9EZXNjcmlwdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgICAgICAgIHRvZG9EZXNjcmlwdGlvbi5jbGFzc0xpc3QuYWRkKCd0b2RvLWRlc2NyaXB0aW9uJyk7XG4gICAgICAgICAgICB0b2RvRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSB0b2RvLmRlc2NyaXB0aW9uO1xuXG4gICAgICAgICAgICAvL2Rlc2NyaXB0aW9uXG4gICAgICAgICAgICBjb25zdCB0b2RvRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgICAgICAgIHRvZG9EYXRlLmNsYXNzTGlzdC5hZGQoJ3RvZG8tZGF0ZScpO1xuICAgICAgICAgICAgdG9kb0RhdGUuaW5uZXJIVE1MID0gYDxzcGFuIGNsYXNzPVwiZHVlLWRhdGUtbGFiZWxcIj5EdWUgRGF0ZTogPC9zcGFuPiAke3RvZG8uZHVlRGF0ZS5zbGljZSg1LCA3KX0vJHt0b2RvLmR1ZURhdGUuc2xpY2UoOCwgMTEpfS8ke3RvZG8uZHVlRGF0ZS5zbGljZSgwLCA0KX1gO1xuXG4gICAgICAgICAgICAvL2Rlc2NyaXB0aW9uXG4gICAgICAgICAgICBjb25zdCB0b2RvVGltZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgICAgICAgIHRvZG9UaW1lLmNsYXNzTGlzdC5hZGQoJ3RvZG8tdGltZScpO1xuICAgICAgICAgICAgdG9kb1RpbWUuaW5uZXJIVE1MID0gYDxzcGFuIGNsYXNzPVwiZHVlLXRpbWUtbGFiZWxcIj5UaW1lIER1ZTogPC9zcGFuPiR7Zm9ybWF0VGltZSh0b2RvLnRpbWUpfWA7XG5cbiAgICAgICAgICAgIC8vY29tcGxldGlvbiBidXR0b25cbiAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRlZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICAgICAgY29tcGxldGVkLnNldEF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKVxuICAgICAgICAgICAgY29tcGxldGVkLmNsYXNzTGlzdC5hZGQoJ2NvbXBsZXRlLWJ1dHRvbicpO1xuICAgICAgICAgICAgaWYodG9kby5jb21wbGV0ZSA9PT0gdHJ1ZSkgY29tcGxldGVkLmNsYXNzTGlzdC5hZGQoJ2NvbXBsZXRlZCcpO1xuICAgICAgICAgICAgKHRvZG8uY29tcGxldGUgPT09IGZhbHNlKSA/IGNvbXBsZXRlZC50ZXh0Q29udGVudCA9ICdOb3QgQ29tcGxldGVkJyA6IGNvbXBsZXRlZC50ZXh0Q29udGVudCA9ICdDb21wbGV0ZWQnO1xuXG5cbiAgICAgICAgICAgIHRvZG9Db250YWluZXIuYXBwZW5kKHRvZG9UaXRsZSwgdG9kb0Rlc2NyaXB0aW9uLCB0b2RvRGF0ZSwgdG9kb1RpbWUsIGNvbXBsZXRlZCk7XG4gICAgICAgICAgICB0aGlzLnRvZG9zY29udGFpbmVyLmFwcGVuZCh0b2RvQ29udGFpbmVyKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFkZENvbXBsZXRpb25CdXR0b25FdmVudChhcnIpO1xuICAgIH1cblxuICAgIGFkZENvbXBsZXRpb25CdXR0b25FdmVudChhcnIpIHtcbiAgICAgICAgY29uc3QgY29tcGxldGlvbkJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jb21wbGV0ZS1idXR0b24nKTtcbiAgICAgICAgZm9yIChjb25zdCBidXR0b24gb2YgY29tcGxldGlvbkJ1dHRvbikge1xuICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoYnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnY29tcGxldGVkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2NvbXBsZXRlZCcpO1xuICAgICAgICAgICAgICAgICAgICBidXR0b24udGV4dENvbnRlbnQgPSAnTm90IENvbXBsZXRlZCdcbiAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQucGFyZW50Tm9kZS5jbGFzc0xpc3QucmVtb3ZlKCdjb21wbGV0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgYXJyW2UudGFyZ2V0LnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlKCdkYXRhLXRvZG8taW5kZXgnKV0uY29tcGxldGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdjb21wbGV0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKCdjb21wbGV0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gJ0NvbXBsZXRlZCc7XG4gICAgICAgICAgICAgICAgICAgIGFycltlLnRhcmdldC5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZSgnZGF0YS10b2RvLWluZGV4JyldLmNvbXBsZXRlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gZm9ybWF0VGltZSh0aW1lKSB7XG4gICAgaWYgKCt0aW1lLnNsaWNlKDAsIDIpID09PSAwKSByZXR1cm4gKGAkeyt0aW1lLnNsaWNlKDAsIDIpICsgMTJ9OiR7dGltZS5zbGljZSgzLCA1KX0gQU1gKTtcbiAgICBlbHNlIGlmICgrdGltZS5zbGljZSgwLCAyKSA8IDEyKSByZXR1cm4gKHRpbWUgKz0gJyBBTScpO1xuICAgIGVsc2UgaWYgKCt0aW1lLnNsaWNlKDAsIDIpID09PSAxMikgcmV0dXJuIChgJHt0aW1lLnNsaWNlKDAsIDIpfToke3RpbWUuc2xpY2UoMywgNSl9IFBNYCk7XG4gICAgZWxzZSByZXR1cm4gKGAkeyt0aW1lLnNsaWNlKDAsIDIpIC0gMTJ9OiR7dGltZS5zbGljZSgzLCA1KX0gUE1gKTtcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBUb0RvIHtcbiAgICBjb25zdHJ1Y3RvciAodGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCB0aW1lLCBjb21wbGV0ZSkge1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5kdWVEYXRlID0gZHVlRGF0ZTtcbiAgICAgICAgdGhpcy50aW1lID0gdGltZTtcbiAgICAgICAgdGhpcy5jb21wbGV0ZSA9IGNvbXBsZXRlO1xuICAgICAgICB0aGlzLnRvZG9zTGlzdCA9ICBbXTtcbiAgICB9XG59IiwiaW1wb3J0IHsgZGVmYXVsdCBhcyBMYW5kaW5nUGFnZSB9IGZyb20gXCIuL2xvYWRob21lLmpzXCI7XG5pbXBvcnQgVG9EbyBmcm9tIFwiLi90YXNrcy5qc1wiO1xuaW1wb3J0IFRvRG9Nb2RhbCBmcm9tIFwiLi90b2RvbW9kYWwuanNcIjtcblxuY29uc3QgbGFuZGluZ0xvYWRlciA9IG5ldyBMYW5kaW5nUGFnZSgpO1xuY29uc3QgdG9kb21vZGFsID0gbmV3IFRvRG9Nb2RhbCgpO1xuY29uc3QgdG9kb3NMaXN0ID0gW107XG5jb25zdCBtb2RhbENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXctdG9kby1jb250YWluZXInKTtcbmNvbnN0IG5ld1RvZG9CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLXRvZG8tYnV0dG9uJyk7XG5jb25zdCBzdWJtaXRUb2RvQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnN1Ym1pdC10b2RvLWJ1dHRvbicpO1xuXG4vL29wZW5zIHRoZSBhZGQgbmV3IHRvZG8gbW9kYWxcbm5ld1RvZG9CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGlmIChtb2RhbENvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGRlbicpKSB7XG4gICAgICAgIHRvZG9tb2RhbC5vcGVuTW9kYWwoZSk7XG4gICAgICAgIGxhbmRpbmdMb2FkZXIuZGltQmFja2dyb3VuZCgpO1xuXG4gICAgfVxufSk7XG5cblxuLy9jbG9zZXMgYWRkIG5ldyB0b2RvIG1vZGFsXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGNvbnN0IGNsb3NlZCA9IHRvZG9tb2RhbC5jbG9zZU1vZGFsKGUpO1xuICAgIGlmIChjbG9zZWQpIGxhbmRpbmdMb2FkZXIudW5EaW1CYWNrZ3JvdW5kKCk7XG5cbn0pXG5cblxuXG5cblxuXG5zdWJtaXRUb2RvQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICBsZXQgaXNGb3JtVmFsaWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtJykuY2hlY2tWYWxpZGl0eSgpO1xuICAgIGlmKCFpc0Zvcm1WYWxpZCkge1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtJykucmVwb3J0VmFsaWRpdHkoKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9XG4gICAgZWxzZXsgXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBjb25zdCB0b2RvVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG9kb25hbWUnKS52YWx1ZTtcbiAgICAgICAgY29uc3QgdG9kb0Rlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RvZG9kZXNjcmlwdGlvbicpLnZhbHVlO1xuICAgICAgICBjb25zdCB0b2RvRGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0b2RvZGF0ZScpLnZhbHVlO1xuICAgICAgICBjb25zdCB0b2RvVGltZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0b2RvdGltZScpLnZhbHVlO1xuICAgICAgICBjb25zdCB0b2RvID0gbmV3IFRvRG8odG9kb1RpdGxlLCB0b2RvRGVzY3JpcHRpb24sIHRvZG9EYXRlLCB0b2RvVGltZSwgZmFsc2UpO1xuICAgICAgICB0b2Rvc0xpc3QucHVzaCh0b2RvKTtcbiAgICAgICAgY29uc29sZS5sb2codG9kb3NMaXN0KVxuICAgICAgICBsYW5kaW5nTG9hZGVyLm1haW5Db250ZW50LmxvYWRUb2Rvcyh0b2Rvc0xpc3QpO1xuICAgICAgICB0b2RvbW9kYWwuY2xvc2VNb2RhbChlKTtcbiAgICAgICAgbGFuZGluZ0xvYWRlci5kaW1CYWNrZ3JvdW5kKCk7XG4gICAgfVxuICAgIH0pXG5cblxuXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBUb0RvTW9kYWwge1xuICAgIGNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY29udGVudCcpO1xuICAgIG1vZGFsQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5ldy10b2RvLWNvbnRhaW5lcicpO1xuICAgIGNvbnN0cnVjdG9yKCkge1xuXG4gICAgfVxuXG4gICAgdG9nZ2xlTW9kYWxWaXNpYmlsaXR5KCkge1xuICAgICAgICB0aGlzLm1vZGFsQ29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpO1xuICAgIH1cblxuICAgIG9wZW5Nb2RhbChlKSB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHRoaXMudG9nZ2xlTW9kYWxWaXNpYmlsaXR5KCk7XG4gICAgfVxuXG4gICAgY2xvc2VNb2RhbChlKSB7XG4gICAgICAgIGxldCByZXZpZXdOb2RlID0gZS50YXJnZXQ7XG4gICAgICAgIGxldCBleGl0Rm9ybSA9IHRydWU7XG4gICAgICAgIGlmICghZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdzdWJtaXQtdG9kby1idXR0b24nKSkge1xuICAgICAgICAgICAgd2hpbGUgKHJldmlld05vZGUgJiYgcmV2aWV3Tm9kZS5ub2RlTmFtZSAhPT0gJ0JPRFknKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJldmlld05vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCduZXctdG9kby1jb250YWluZXInKSkge1xuICAgICAgICAgICAgICAgICAgICBleGl0Rm9ybSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV2aWV3Tm9kZSA9IHJldmlld05vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZXhpdEZvcm0gJiYgIXRoaXMubW9kYWxDb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKSkge1xuICAgICAgICAgICAgdGhpcy5tb2RhbENvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBleGl0Rm9ybTtcbiAgICB9XG5cbiAgICBsb2FkTW9kYWxDb250ZW50KCkge1xuICAgICAgICAvL2RhdGVcbiAgICAgICAgY29uc3QgdGFza0RhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG9kb2RhdGUnKTtcbiAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSBnZXRDdXJyZW50RGF0ZSgpO1xuICAgICAgICB0YXNrRGF0ZS5zZXRBdHRyaWJ1dGUoeydtaW4nOiBgJHtjdXJyZW50RGF0ZS55ZWFyfS0ke2N1cnJlbnREYXRlLm1vbnRofS0ke2N1cnJlbnREYXRlLmRheX1gLCAncmVxdWlyZWQnOiB0cnVlfSlcblxuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2V0Q3VycmVudERhdGUoKSB7XG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICBjb25zdCBkYXkgPSBkYXRlLmdldERhdGUoKTtcbiAgICBsZXQgbW9udGggPSBkYXRlLmdldE1vbnRoKCkgKyAxO1xuICAgIGlmIChtb250aC50b1N0cmluZy5sZW5ndGggPCAyKSBtb250aCA9ICcwJyArIG1vbnRoO1xuICAgIHJldHVybiB7IHllYXIsIG1vbnRoLCBkYXkgfVxufSJdLCJuYW1lcyI6WyJNYWluQ29udGVudCIsImNvbnRlbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJtYWluQ29udGVudENvbnRhaW5lciIsInRvZG9zY29udGFpbmVyIiwiY29uc3RydWN0b3IiLCJsb2FkVG9kb3MiLCJhcnIiLCJpIiwidGhpcyIsImlubmVySFRNTCIsInRvZG8iLCJ0b2RvQ29udGFpbmVyIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInNldEF0dHJpYnV0ZSIsImNvbXBsZXRlIiwidG9kb1RpdGxlIiwidGV4dENvbnRlbnQiLCJ0aXRsZSIsInRvZG9EZXNjcmlwdGlvbiIsImRlc2NyaXB0aW9uIiwidG9kb0RhdGUiLCJkdWVEYXRlIiwic2xpY2UiLCJ0b2RvVGltZSIsInRpbWUiLCJjb21wbGV0ZWQiLCJhcHBlbmQiLCJhZGRDb21wbGV0aW9uQnV0dG9uRXZlbnQiLCJjb21wbGV0aW9uQnV0dG9uIiwicXVlcnlTZWxlY3RvckFsbCIsImJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiY29udGFpbnMiLCJyZW1vdmUiLCJ0YXJnZXQiLCJwYXJlbnROb2RlIiwiZ2V0QXR0cmlidXRlIiwiVG9EbyIsInRvZG9zTGlzdCIsImxhbmRpbmdMb2FkZXIiLCJuYXYiLCJtZW51IiwibWFpbkNvbnRlbnQiLCJkaW1CYWNrZ3JvdW5kIiwic3R5bGUiLCJmaWx0ZXIiLCJ1bkRpbUJhY2tncm91bmQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJ0b2RvbW9kYWwiLCJtb2RhbENvbnRhaW5lciIsInRvZ2dsZU1vZGFsVmlzaWJpbGl0eSIsInRvZ2dsZSIsIm9wZW5Nb2RhbCIsInN0b3BQcm9wYWdhdGlvbiIsImNsb3NlTW9kYWwiLCJyZXZpZXdOb2RlIiwiZXhpdEZvcm0iLCJub2RlTmFtZSIsImxvYWRNb2RhbENvbnRlbnQiLCJ0YXNrRGF0ZSIsImN1cnJlbnREYXRlIiwiZGF0ZSIsIkRhdGUiLCJ5ZWFyIiwiZ2V0RnVsbFllYXIiLCJkYXkiLCJnZXREYXRlIiwibW9udGgiLCJnZXRNb250aCIsInRvU3RyaW5nIiwibGVuZ3RoIiwiZ2V0Q3VycmVudERhdGUiLCJuZXdUb2RvQnV0dG9uIiwic3VibWl0VG9kb0J1dHRvbiIsIndpbmRvdyIsImNoZWNrVmFsaWRpdHkiLCJwcmV2ZW50RGVmYXVsdCIsInZhbHVlIiwicHVzaCIsImNvbnNvbGUiLCJsb2ciLCJyZXBvcnRWYWxpZGl0eSJdLCJzb3VyY2VSb290IjoiIn0=